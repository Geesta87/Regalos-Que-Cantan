(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Jh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fc={exports:{}},wi={},mc={exports:{}},D={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ss=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),sf=Symbol.for("react.memo"),af=Symbol.for("react.lazy"),Rl=Symbol.iterator;function of(t){return t===null||typeof t!="object"?null:(t=Rl&&t[Rl]||t["@@iterator"],typeof t=="function"?t:null)}var pc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gc=Object.assign,yc={};function nn(t,e,r){this.props=t,this.context=e,this.refs=yc,this.updater=r||pc}nn.prototype.isReactComponent={};nn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vc(){}vc.prototype=nn.prototype;function Eo(t,e,r){this.props=t,this.context=e,this.refs=yc,this.updater=r||pc}var To=Eo.prototype=new vc;To.constructor=Eo;gc(To,nn.prototype);To.isPureReactComponent=!0;var Pl=Array.isArray,xc=Object.prototype.hasOwnProperty,Co={current:null},wc={key:!0,ref:!0,__self:!0,__source:!0};function bc(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)xc.call(e,n)&&!wc.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ss,type:t,key:i,ref:a,props:s,_owner:Co.current}}function lf(t,e){return{$$typeof:ss,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oo(t){return typeof t=="object"&&t!==null&&t.$$typeof===ss}function uf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Al=/\/+/g;function Mi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uf(""+t.key):e.toString(36)}function Is(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ss:case Qh:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Mi(a,0):n,Pl(s)?(r="",t!=null&&(r=t.replace(Al,"$&/")+"/"),Is(s,e,r,"",function(c){return c})):s!=null&&(Oo(s)&&(s=lf(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Al,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Pl(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+Mi(i,l);a+=Is(i,e,r,u,s)}else if(u=of(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+Mi(i,l++),a+=Is(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fs(t,e,r){if(t==null)return t;var n=[],s=0;return Is(t,n,"","",function(i){return e.call(r,i,s++)}),n}function cf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var we={current:null},$s={transition:null},df={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:$s,ReactCurrentOwner:Co};function _c(){throw Error("act(...) is not supported in production builds of React.")}D.Children={map:fs,forEach:function(t,e,r){fs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return fs(t,function(){e++}),e},toArray:function(t){return fs(t,function(e){return e})||[]},only:function(t){if(!Oo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};D.Component=nn;D.Fragment=Yh;D.Profiler=Zh;D.PureComponent=Eo;D.StrictMode=Xh;D.Suspense=nf;D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df;D.act=_c;D.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=gc({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Co.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)xc.call(e,u)&&!wc.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:ss,type:t.type,key:s,ref:i,props:n,_owner:a}};D.createContext=function(t){return t={$$typeof:tf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ef,_context:t},t.Consumer=t};D.createElement=bc;D.createFactory=function(t){var e=bc.bind(null,t);return e.type=t,e};D.createRef=function(){return{current:null}};D.forwardRef=function(t){return{$$typeof:rf,render:t}};D.isValidElement=Oo;D.lazy=function(t){return{$$typeof:af,_payload:{_status:-1,_result:t},_init:cf}};D.memo=function(t,e){return{$$typeof:sf,type:t,compare:e===void 0?null:e}};D.startTransition=function(t){var e=$s.transition;$s.transition={};try{t()}finally{$s.transition=e}};D.unstable_act=_c;D.useCallback=function(t,e){return we.current.useCallback(t,e)};D.useContext=function(t){return we.current.useContext(t)};D.useDebugValue=function(){};D.useDeferredValue=function(t){return we.current.useDeferredValue(t)};D.useEffect=function(t,e){return we.current.useEffect(t,e)};D.useId=function(){return we.current.useId()};D.useImperativeHandle=function(t,e,r){return we.current.useImperativeHandle(t,e,r)};D.useInsertionEffect=function(t,e){return we.current.useInsertionEffect(t,e)};D.useLayoutEffect=function(t,e){return we.current.useLayoutEffect(t,e)};D.useMemo=function(t,e){return we.current.useMemo(t,e)};D.useReducer=function(t,e,r){return we.current.useReducer(t,e,r)};D.useRef=function(t){return we.current.useRef(t)};D.useState=function(t){return we.current.useState(t)};D.useSyncExternalStore=function(t,e,r){return we.current.useSyncExternalStore(t,e,r)};D.useTransition=function(){return we.current.useTransition()};D.version="18.3.1";mc.exports=D;var T=mc.exports;const bi=Jh(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf=T,ff=Symbol.for("react.element"),mf=Symbol.for("react.fragment"),pf=Object.prototype.hasOwnProperty,gf=hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yf={key:!0,ref:!0,__self:!0,__source:!0};function kc(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)pf.call(e,n)&&!yf.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:ff,type:t,key:i,ref:a,props:s,_owner:gf.current}}wi.Fragment=mf;wi.jsx=kc;wi.jsxs=kc;fc.exports=wi;var o=fc.exports,ba={},jc={exports:{}},ze={},Sc={exports:{}},Nc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,I){var U=N.length;N.push(I);e:for(;0<U;){var B=U-1>>>1,ee=N[B];if(0<s(ee,I))N[B]=I,N[U]=ee,U=B;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var I=N[0],U=N.pop();if(U!==I){N[0]=U;e:for(var B=0,ee=N.length,Jt=ee>>>1;B<Jt;){var Re=2*(B+1)-1,jt=N[Re],Fe=Re+1,xr=N[Fe];if(0>s(jt,U))Fe<ee&&0>s(xr,jt)?(N[B]=xr,N[Fe]=U,B=Fe):(N[B]=jt,N[Re]=U,B=Re);else if(Fe<ee&&0>s(xr,U))N[B]=xr,N[Fe]=U,B=Fe;else break e}}return I}function s(N,I){var U=N.sortIndex-I.sortIndex;return U!==0?U:N.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,m=null,f=3,y=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(N){for(var I=r(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=N)n(c),I.sortIndex=I.expirationTime,e(u,I);else break;I=r(c)}}function x(N){if(w=!1,g(N),!v)if(r(u)!==null)v=!0,kt(j);else{var I=r(c);I!==null&&vr(x,I.startTime-N)}}function j(N,I){v=!1,w&&(w=!1,p(E),E=-1),y=!0;var U=f;try{for(g(I),m=r(u);m!==null&&(!(m.expirationTime>I)||N&&!Oe());){var B=m.callback;if(typeof B=="function"){m.callback=null,f=m.priorityLevel;var ee=B(m.expirationTime<=I);I=t.unstable_now(),typeof ee=="function"?m.callback=ee:m===r(u)&&n(u),g(I)}else n(u);m=r(u)}if(m!==null)var Jt=!0;else{var Re=r(c);Re!==null&&vr(x,Re.startTime-I),Jt=!1}return Jt}finally{m=null,f=U,y=!1}}var k=!1,_=null,E=-1,$=5,L=-1;function Oe(){return!(t.unstable_now()-L<$)}function _e(){if(_!==null){var N=t.unstable_now();L=N;var I=!0;try{I=_(!0,N)}finally{I?Kt():(k=!1,_=null)}}else k=!1}var Kt;if(typeof h=="function")Kt=function(){h(_e)};else if(typeof MessageChannel<"u"){var Gt=new MessageChannel,cs=Gt.port2;Gt.port1.onmessage=_e,Kt=function(){cs.postMessage(null)}}else Kt=function(){b(_e,0)};function kt(N){_=N,k||(k=!0,Kt())}function vr(N,I){E=b(function(){N(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,kt(j))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var U=f;f=I;try{return N()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var U=f;f=N;try{return I()}finally{f=U}},t.unstable_scheduleCallback=function(N,I,U){var B=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,N){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=U+ee,N={id:d++,callback:I,priorityLevel:N,startTime:U,expirationTime:ee,sortIndex:-1},U>B?(N.sortIndex=U,e(c,N),r(u)===null&&N===r(c)&&(w?(p(E),E=-1):w=!0,vr(x,U-B))):(N.sortIndex=ee,e(u,N),v||y||(v=!0,kt(j))),N},t.unstable_shouldYield=Oe,t.unstable_wrapCallback=function(N){var I=f;return function(){var U=f;f=I;try{return N.apply(this,arguments)}finally{f=U}}}})(Nc);Sc.exports=Nc;var vf=Sc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=T,De=vf;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ec=new Set,$n={};function gr(t,e){Qr(t,e),Qr(t+"Capture",e)}function Qr(t,e){for($n[t]=e,t=0;t<e.length;t++)Ec.add(e[t])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=Object.prototype.hasOwnProperty,wf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Il={},$l={};function bf(t){return _a.call($l,t)?!0:_a.call(Il,t)?!1:wf.test(t)?$l[t]=!0:(Il[t]=!0,!1)}function _f(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kf(t,e,r,n){if(e===null||typeof e>"u"||_f(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function be(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fe[t]=new be(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fe[e]=new be(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fe[t]=new be(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fe[t]=new be(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fe[t]=new be(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fe[t]=new be(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fe[t]=new be(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fe[t]=new be(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fe[t]=new be(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function Po(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ro,Po);fe[e]=new be(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ro,Po);fe[e]=new be(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ro,Po);fe[e]=new be(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fe[t]=new be(t,1,!1,t.toLowerCase(),null,!1,!1)});fe.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fe[t]=new be(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ao(t,e,r,n){var s=fe.hasOwnProperty(e)?fe[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kf(e,r,s,n)&&(r=null),n||s===null?bf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var bt=xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ms=Symbol.for("react.element"),Or=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),Io=Symbol.for("react.strict_mode"),ka=Symbol.for("react.profiler"),Tc=Symbol.for("react.provider"),Cc=Symbol.for("react.context"),$o=Symbol.for("react.forward_ref"),ja=Symbol.for("react.suspense"),Sa=Symbol.for("react.suspense_list"),Lo=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Oc=Symbol.for("react.offscreen"),Ll=Symbol.iterator;function dn(t){return t===null||typeof t!="object"?null:(t=Ll&&t[Ll]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,Fi;function xn(t){if(Fi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Fi=e&&e[1]||""}return`
`+Fi+t}var Bi=!1;function Vi(t,e){if(!t||Bi)return"";Bi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Bi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?xn(t):""}function jf(t){switch(t.tag){case 5:return xn(t.type);case 16:return xn("Lazy");case 13:return xn("Suspense");case 19:return xn("SuspenseList");case 0:case 2:case 15:return t=Vi(t.type,!1),t;case 11:return t=Vi(t.type.render,!1),t;case 1:return t=Vi(t.type,!0),t;default:return""}}function Na(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rr:return"Fragment";case Or:return"Portal";case ka:return"Profiler";case Io:return"StrictMode";case ja:return"Suspense";case Sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cc:return(t.displayName||"Context")+".Consumer";case Tc:return(t._context.displayName||"Context")+".Provider";case $o:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lo:return e=t.displayName||null,e!==null?e:Na(t.type)||"Memo";case Nt:e=t._payload,t=t._init;try{return Na(t(e))}catch{}}return null}function Sf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Na(e);case 8:return e===Io?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nf(t){var e=Rc(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ps(t){t._valueTracker||(t._valueTracker=Nf(t))}function Pc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Rc(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ea(t,e){var r=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ul(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ac(t,e){e=e.checked,e!=null&&Ao(t,"checked",e,!1)}function Ta(t,e){Ac(t,e);var r=Bt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ca(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ca(t,e.type,Bt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dl(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ca(t,e,r){(e!=="number"||Ks(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wn=Array.isArray;function Vr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bt(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Oa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zl(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(S(92));if(wn(r)){if(1<r.length)throw Error(S(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bt(r)}}function Ic(t,e){var r=Bt(e.value),n=Bt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ml(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $c(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$c(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gs,Lc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gs=gs||document.createElement("div"),gs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ln(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ef=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(t){Ef.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jn[e]=jn[t]})});function Uc(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||jn.hasOwnProperty(t)&&jn[t]?(""+e).trim():e+"px"}function Dc(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Uc(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Tf=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pa(t,e){if(e){if(Tf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function Aa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=null;function Uo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $a=null,Wr=null,qr=null;function Fl(t){if(t=os(t)){if(typeof $a!="function")throw Error(S(280));var e=t.stateNode;e&&(e=Ni(e),$a(t.stateNode,t.type,e))}}function zc(t){Wr?qr?qr.push(t):qr=[t]:Wr=t}function Mc(){if(Wr){var t=Wr,e=qr;if(qr=Wr=null,Fl(t),e)for(t=0;t<e.length;t++)Fl(e[t])}}function Fc(t,e){return t(e)}function Bc(){}var Wi=!1;function Vc(t,e,r){if(Wi)return t(e,r);Wi=!0;try{return Fc(t,e,r)}finally{Wi=!1,(Wr!==null||qr!==null)&&(Bc(),Mc())}}function Un(t,e){var r=t.stateNode;if(r===null)return null;var n=Ni(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(S(231,e,typeof r));return r}var La=!1;if(yt)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){La=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{La=!1}function Cf(t,e,r,n,s,i,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Sn=!1,Gs=null,Js=!1,Ua=null,Of={onError:function(t){Sn=!0,Gs=t}};function Rf(t,e,r,n,s,i,a,l,u){Sn=!1,Gs=null,Cf.apply(Of,arguments)}function Pf(t,e,r,n,s,i,a,l,u){if(Rf.apply(this,arguments),Sn){if(Sn){var c=Gs;Sn=!1,Gs=null}else throw Error(S(198));Js||(Js=!0,Ua=c)}}function yr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Wc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bl(t){if(yr(t)!==t)throw Error(S(188))}function Af(t){var e=t.alternate;if(!e){if(e=yr(t),e===null)throw Error(S(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Bl(s),t;if(i===n)return Bl(s),e;i=i.sibling}throw Error(S(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(S(189))}}if(r.alternate!==n)throw Error(S(190))}if(r.tag!==3)throw Error(S(188));return r.stateNode.current===r?t:e}function qc(t){return t=Af(t),t!==null?Hc(t):null}function Hc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hc(t);if(e!==null)return e;t=t.sibling}return null}var Kc=De.unstable_scheduleCallback,Vl=De.unstable_cancelCallback,If=De.unstable_shouldYield,$f=De.unstable_requestPaint,te=De.unstable_now,Lf=De.unstable_getCurrentPriorityLevel,Do=De.unstable_ImmediatePriority,Gc=De.unstable_UserBlockingPriority,Qs=De.unstable_NormalPriority,Uf=De.unstable_LowPriority,Jc=De.unstable_IdlePriority,_i=null,ot=null;function Df(t){if(ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(_i,t,void 0,(t.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Ff,zf=Math.log,Mf=Math.LN2;function Ff(t){return t>>>=0,t===0?32:31-(zf(t)/Mf|0)|0}var ys=64,vs=4194304;function bn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ys(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=bn(l):(i&=a,i!==0&&(n=bn(i)))}else a=r&~s,a!==0?n=bn(a):i!==0&&(n=bn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-tt(e),s=1<<r,n|=t[r],e&=~s;return n}function Bf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-tt(i),l=1<<a,u=s[a];u===-1?(!(l&r)||l&n)&&(s[a]=Bf(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Da(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qc(){var t=ys;return ys<<=1,!(ys&4194240)&&(ys=64),t}function qi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function is(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tt(e),t[e]=r}function Wf(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-tt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function zo(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-tt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var F=0;function Yc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xc,Mo,Zc,ed,td,za=!1,xs=[],It=null,$t=null,Lt=null,Dn=new Map,zn=new Map,Ct=[],qf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wl(t,e){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Dn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(e.pointerId)}}function fn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=os(e),e!==null&&Mo(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hf(t,e,r,n,s){switch(e){case"focusin":return It=fn(It,t,e,r,n,s),!0;case"dragenter":return $t=fn($t,t,e,r,n,s),!0;case"mouseover":return Lt=fn(Lt,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Dn.set(i,fn(Dn.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,zn.set(i,fn(zn.get(i)||null,t,e,r,n,s)),!0}return!1}function rd(t){var e=sr(t.target);if(e!==null){var r=yr(e);if(r!==null){if(e=r.tag,e===13){if(e=Wc(r),e!==null){t.blockedOn=e,td(t.priority,function(){Zc(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ls(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ma(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ia=n,r.target.dispatchEvent(n),Ia=null}else return e=os(r),e!==null&&Mo(e),t.blockedOn=r,!1;e.shift()}return!0}function ql(t,e,r){Ls(t)&&r.delete(e)}function Kf(){za=!1,It!==null&&Ls(It)&&(It=null),$t!==null&&Ls($t)&&($t=null),Lt!==null&&Ls(Lt)&&(Lt=null),Dn.forEach(ql),zn.forEach(ql)}function mn(t,e){t.blockedOn===e&&(t.blockedOn=null,za||(za=!0,De.unstable_scheduleCallback(De.unstable_NormalPriority,Kf)))}function Mn(t){function e(s){return mn(s,t)}if(0<xs.length){mn(xs[0],t);for(var r=1;r<xs.length;r++){var n=xs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(It!==null&&mn(It,t),$t!==null&&mn($t,t),Lt!==null&&mn(Lt,t),Dn.forEach(e),zn.forEach(e),r=0;r<Ct.length;r++)n=Ct[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ct.length&&(r=Ct[0],r.blockedOn===null);)rd(r),r.blockedOn===null&&Ct.shift()}var Hr=bt.ReactCurrentBatchConfig,Xs=!0;function Gf(t,e,r,n){var s=F,i=Hr.transition;Hr.transition=null;try{F=1,Fo(t,e,r,n)}finally{F=s,Hr.transition=i}}function Jf(t,e,r,n){var s=F,i=Hr.transition;Hr.transition=null;try{F=4,Fo(t,e,r,n)}finally{F=s,Hr.transition=i}}function Fo(t,e,r,n){if(Xs){var s=Ma(t,e,r,n);if(s===null)ta(t,e,n,Zs,r),Wl(t,n);else if(Hf(s,t,e,r,n))n.stopPropagation();else if(Wl(t,n),e&4&&-1<qf.indexOf(t)){for(;s!==null;){var i=os(s);if(i!==null&&Xc(i),i=Ma(t,e,r,n),i===null&&ta(t,e,n,Zs,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ta(t,e,n,null,r)}}var Zs=null;function Ma(t,e,r,n){if(Zs=null,t=Uo(n),t=sr(t),t!==null)if(e=yr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Wc(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zs=t,null}function nd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lf()){case Do:return 1;case Gc:return 4;case Qs:case Uf:return 16;case Jc:return 536870912;default:return 16}default:return 16}}var Pt=null,Bo=null,Us=null;function sd(){if(Us)return Us;var t,e=Bo,r=e.length,n,s="value"in Pt?Pt.value:Pt.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Us=s.slice(t,1<n?1-n:void 0)}function Ds(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ws(){return!0}function Hl(){return!1}function Me(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ws:Hl,this.isPropagationStopped=Hl,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),e}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vo=Me(sn),as=Y({},sn,{view:0,detail:0}),Qf=Me(as),Hi,Ki,pn,ki=Y({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pn&&(pn&&t.type==="mousemove"?(Hi=t.screenX-pn.screenX,Ki=t.screenY-pn.screenY):Ki=Hi=0,pn=t),Hi)},movementY:function(t){return"movementY"in t?t.movementY:Ki}}),Kl=Me(ki),Yf=Y({},ki,{dataTransfer:0}),Xf=Me(Yf),Zf=Y({},as,{relatedTarget:0}),Gi=Me(Zf),em=Y({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),tm=Me(em),rm=Y({},sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nm=Me(rm),sm=Y({},sn,{data:0}),Gl=Me(sm),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=om[t])?!!e[t]:!1}function Wo(){return lm}var um=Y({},as,{key:function(t){if(t.key){var e=im[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ds(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?am[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wo,charCode:function(t){return t.type==="keypress"?Ds(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ds(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cm=Me(um),dm=Y({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=Me(dm),hm=Y({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wo}),fm=Me(hm),mm=Y({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=Me(mm),gm=Y({},ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=Me(gm),vm=[9,13,27,32],qo=yt&&"CompositionEvent"in window,Nn=null;yt&&"documentMode"in document&&(Nn=document.documentMode);var xm=yt&&"TextEvent"in window&&!Nn,id=yt&&(!qo||Nn&&8<Nn&&11>=Nn),Ql=" ",Yl=!1;function ad(t,e){switch(t){case"keyup":return vm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function od(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pr=!1;function wm(t,e){switch(t){case"compositionend":return od(e);case"keypress":return e.which!==32?null:(Yl=!0,Ql);case"textInput":return t=e.data,t===Ql&&Yl?null:t;default:return null}}function bm(t,e){if(Pr)return t==="compositionend"||!qo&&ad(t,e)?(t=sd(),Us=Bo=Pt=null,Pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return id&&e.locale!=="ko"?null:e.data;default:return null}}var _m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_m[t.type]:e==="textarea"}function ld(t,e,r,n){zc(n),e=ei(e,"onChange"),0<e.length&&(r=new Vo("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var En=null,Fn=null;function km(t){xd(t,0)}function ji(t){var e=$r(t);if(Pc(e))return t}function jm(t,e){if(t==="change")return e}var ud=!1;if(yt){var Ji;if(yt){var Qi="oninput"in document;if(!Qi){var Zl=document.createElement("div");Zl.setAttribute("oninput","return;"),Qi=typeof Zl.oninput=="function"}Ji=Qi}else Ji=!1;ud=Ji&&(!document.documentMode||9<document.documentMode)}function eu(){En&&(En.detachEvent("onpropertychange",cd),Fn=En=null)}function cd(t){if(t.propertyName==="value"&&ji(Fn)){var e=[];ld(e,Fn,t,Uo(t)),Vc(km,e)}}function Sm(t,e,r){t==="focusin"?(eu(),En=e,Fn=r,En.attachEvent("onpropertychange",cd)):t==="focusout"&&eu()}function Nm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ji(Fn)}function Em(t,e){if(t==="click")return ji(e)}function Tm(t,e){if(t==="input"||t==="change")return ji(e)}function Cm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nt=typeof Object.is=="function"?Object.is:Cm;function Bn(t,e){if(nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_a.call(e,s)||!nt(t[s],e[s]))return!1}return!0}function tu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ru(t,e){var r=tu(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tu(r)}}function dd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hd(){for(var t=window,e=Ks();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ks(t.document)}return e}function Ho(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Om(t){var e=hd(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&dd(r.ownerDocument.documentElement,r)){if(n!==null&&Ho(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=ru(r,i);var a=ru(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rm=yt&&"documentMode"in document&&11>=document.documentMode,Ar=null,Fa=null,Tn=null,Ba=!1;function nu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ba||Ar==null||Ar!==Ks(n)||(n=Ar,"selectionStart"in n&&Ho(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Tn&&Bn(Tn,n)||(Tn=n,n=ei(Fa,"onSelect"),0<n.length&&(e=new Vo("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ar)))}function bs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ir={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Yi={},fd={};yt&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Si(t){if(Yi[t])return Yi[t];if(!Ir[t])return t;var e=Ir[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in fd)return Yi[t]=e[r];return t}var md=Si("animationend"),pd=Si("animationiteration"),gd=Si("animationstart"),yd=Si("transitionend"),vd=new Map,su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wt(t,e){vd.set(t,e),gr(e,[t])}for(var Xi=0;Xi<su.length;Xi++){var Zi=su[Xi],Pm=Zi.toLowerCase(),Am=Zi[0].toUpperCase()+Zi.slice(1);Wt(Pm,"on"+Am)}Wt(md,"onAnimationEnd");Wt(pd,"onAnimationIteration");Wt(gd,"onAnimationStart");Wt("dblclick","onDoubleClick");Wt("focusin","onFocus");Wt("focusout","onBlur");Wt(yd,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Im=new Set("cancel close invalid load scroll toggle".split(" ").concat(_n));function iu(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Pf(n,e,void 0,t),t.currentTarget=null}function xd(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;iu(s,l,c),i=u}else for(a=0;a<n.length;a++){if(l=n[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;iu(s,l,c),i=u}}}if(Js)throw t=Ua,Js=!1,Ua=null,t}function q(t,e){var r=e[Ka];r===void 0&&(r=e[Ka]=new Set);var n=t+"__bubble";r.has(n)||(wd(e,t,2,!1),r.add(n))}function ea(t,e,r){var n=0;e&&(n|=4),wd(r,t,n,e)}var _s="_reactListening"+Math.random().toString(36).slice(2);function Vn(t){if(!t[_s]){t[_s]=!0,Ec.forEach(function(r){r!=="selectionchange"&&(Im.has(r)||ea(r,!1,t),ea(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_s]||(e[_s]=!0,ea("selectionchange",!1,e))}}function wd(t,e,r,n){switch(nd(e)){case 1:var s=Gf;break;case 4:s=Jf;break;default:s=Fo}r=s.bind(null,e,r,t),s=void 0,!La||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ta(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=sr(l),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Vc(function(){var c=i,d=Uo(r),m=[];e:{var f=vd.get(t);if(f!==void 0){var y=Vo,v=t;switch(t){case"keypress":if(Ds(r)===0)break e;case"keydown":case"keyup":y=cm;break;case"focusin":v="focus",y=Gi;break;case"focusout":v="blur",y=Gi;break;case"beforeblur":case"afterblur":y=Gi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=fm;break;case md:case pd:case gd:y=tm;break;case yd:y=pm;break;case"scroll":y=Qf;break;case"wheel":y=ym;break;case"copy":case"cut":case"paste":y=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Jl}var w=(e&4)!==0,b=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var h=c,g;h!==null;){g=h;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,p!==null&&(x=Un(h,p),x!=null&&w.push(Wn(h,x,g)))),b)break;h=h.return}0<w.length&&(f=new y(f,v,null,r,d),m.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&r!==Ia&&(v=r.relatedTarget||r.fromElement)&&(sr(v)||v[vt]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=c,v=v?sr(v):null,v!==null&&(b=yr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(w=Kl,x="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(w=Jl,x="onPointerLeave",p="onPointerEnter",h="pointer"),b=y==null?f:$r(y),g=v==null?f:$r(v),f=new w(x,h+"leave",y,r,d),f.target=b,f.relatedTarget=g,x=null,sr(d)===c&&(w=new w(p,h+"enter",v,r,d),w.target=g,w.relatedTarget=b,x=w),b=x,y&&v)t:{for(w=y,p=v,h=0,g=w;g;g=wr(g))h++;for(g=0,x=p;x;x=wr(x))g++;for(;0<h-g;)w=wr(w),h--;for(;0<g-h;)p=wr(p),g--;for(;h--;){if(w===p||p!==null&&w===p.alternate)break t;w=wr(w),p=wr(p)}w=null}else w=null;y!==null&&au(m,f,y,w,!1),v!==null&&b!==null&&au(m,b,v,w,!0)}}e:{if(f=c?$r(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var j=jm;else if(Xl(f))if(ud)j=Tm;else{j=Nm;var k=Sm}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Em);if(j&&(j=j(t,c))){ld(m,j,r,d);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Ca(f,"number",f.value)}switch(k=c?$r(c):window,t){case"focusin":(Xl(k)||k.contentEditable==="true")&&(Ar=k,Fa=c,Tn=null);break;case"focusout":Tn=Fa=Ar=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,nu(m,r,d);break;case"selectionchange":if(Rm)break;case"keydown":case"keyup":nu(m,r,d)}var _;if(qo)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pr?ad(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(id&&r.locale!=="ko"&&(Pr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pr&&(_=sd()):(Pt=d,Bo="value"in Pt?Pt.value:Pt.textContent,Pr=!0)),k=ei(c,E),0<k.length&&(E=new Gl(E,t,null,r,d),m.push({event:E,listeners:k}),_?E.data=_:(_=od(r),_!==null&&(E.data=_)))),(_=xm?wm(t,r):bm(t,r))&&(c=ei(c,"onBeforeInput"),0<c.length&&(d=new Gl("onBeforeInput","beforeinput",null,r,d),m.push({event:d,listeners:c}),d.data=_))}xd(m,e)})}function Wn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ei(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Un(t,r),i!=null&&n.unshift(Wn(t,i,s)),i=Un(t,e),i!=null&&n.push(Wn(t,i,s))),t=t.return}return n}function wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function au(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=Un(r,i),u!=null&&a.unshift(Wn(r,u,l))):s||(u=Un(r,i),u!=null&&a.push(Wn(r,u,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var $m=/\r\n?/g,Lm=/\u0000|\uFFFD/g;function ou(t){return(typeof t=="string"?t:""+t).replace($m,`
`).replace(Lm,"")}function ks(t,e,r){if(e=ou(e),ou(t)!==e&&r)throw Error(S(425))}function ti(){}var Va=null,Wa=null;function qa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Um=typeof clearTimeout=="function"?clearTimeout:void 0,lu=typeof Promise=="function"?Promise:void 0,Dm=typeof queueMicrotask=="function"?queueMicrotask:typeof lu<"u"?function(t){return lu.resolve(null).then(t).catch(zm)}:Ha;function zm(t){setTimeout(function(){throw t})}function ra(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(e)}function Ut(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var an=Math.random().toString(36).slice(2),at="__reactFiber$"+an,qn="__reactProps$"+an,vt="__reactContainer$"+an,Ka="__reactEvents$"+an,Mm="__reactListeners$"+an,Fm="__reactHandles$"+an;function sr(t){var e=t[at];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vt]||r[at]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uu(t);t!==null;){if(r=t[at])return r;t=uu(t)}return e}t=r,r=t.parentNode}return null}function os(t){return t=t[at]||t[vt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $r(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function Ni(t){return t[qn]||null}var Ga=[],Lr=-1;function qt(t){return{current:t}}function H(t){0>Lr||(t.current=Ga[Lr],Ga[Lr]=null,Lr--)}function W(t,e){Lr++,Ga[Lr]=t.current,t.current=e}var Vt={},ye=qt(Vt),Ne=qt(!1),cr=Vt;function Yr(t,e){var r=t.type.contextTypes;if(!r)return Vt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ee(t){return t=t.childContextTypes,t!=null}function ri(){H(Ne),H(ye)}function cu(t,e,r){if(ye.current!==Vt)throw Error(S(168));W(ye,e),W(Ne,r)}function bd(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(S(108,Sf(t)||"Unknown",s));return Y({},r,n)}function ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vt,cr=ye.current,W(ye,t),W(Ne,Ne.current),!0}function du(t,e,r){var n=t.stateNode;if(!n)throw Error(S(169));r?(t=bd(t,e,cr),n.__reactInternalMemoizedMergedChildContext=t,H(Ne),H(ye),W(ye,t)):H(Ne),W(Ne,r)}var ft=null,Ei=!1,na=!1;function _d(t){ft===null?ft=[t]:ft.push(t)}function Bm(t){Ei=!0,_d(t)}function Ht(){if(!na&&ft!==null){na=!0;var t=0,e=F;try{var r=ft;for(F=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ft=null,Ei=!1}catch(s){throw ft!==null&&(ft=ft.slice(t+1)),Kc(Do,Ht),s}finally{F=e,na=!1}}return null}var Ur=[],Dr=0,si=null,ii=0,Be=[],Ve=0,dr=null,mt=1,pt="";function Xt(t,e){Ur[Dr++]=ii,Ur[Dr++]=si,si=t,ii=e}function kd(t,e,r){Be[Ve++]=mt,Be[Ve++]=pt,Be[Ve++]=dr,dr=t;var n=mt;t=pt;var s=32-tt(n)-1;n&=~(1<<s),r+=1;var i=32-tt(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,mt=1<<32-tt(e)+s|r<<s|n,pt=i+t}else mt=1<<i|r<<s|n,pt=t}function Ko(t){t.return!==null&&(Xt(t,1),kd(t,1,0))}function Go(t){for(;t===si;)si=Ur[--Dr],Ur[Dr]=null,ii=Ur[--Dr],Ur[Dr]=null;for(;t===dr;)dr=Be[--Ve],Be[Ve]=null,pt=Be[--Ve],Be[Ve]=null,mt=Be[--Ve],Be[Ve]=null}var Ue=null,Le=null,K=!1,et=null;function jd(t,e){var r=We(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hu(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,Le=Ut(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=dr!==null?{id:mt,overflow:pt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=We(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ue=t,Le=null,!0):!1;default:return!1}}function Ja(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qa(t){if(K){var e=Le;if(e){var r=e;if(!hu(t,e)){if(Ja(t))throw Error(S(418));e=Ut(r.nextSibling);var n=Ue;e&&hu(t,e)?jd(n,r):(t.flags=t.flags&-4097|2,K=!1,Ue=t)}}else{if(Ja(t))throw Error(S(418));t.flags=t.flags&-4097|2,K=!1,Ue=t}}}function fu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function js(t){if(t!==Ue)return!1;if(!K)return fu(t),K=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qa(t.type,t.memoizedProps)),e&&(e=Le)){if(Ja(t))throw Sd(),Error(S(418));for(;e;)jd(t,e),e=Ut(e.nextSibling)}if(fu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Le=Ut(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=Ue?Ut(t.stateNode.nextSibling):null;return!0}function Sd(){for(var t=Le;t;)t=Ut(t.nextSibling)}function Xr(){Le=Ue=null,K=!1}function Jo(t){et===null?et=[t]:et.push(t)}var Vm=bt.ReactCurrentBatchConfig;function gn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(S(309));var n=r.stateNode}if(!n)throw Error(S(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(S(284));if(!r._owner)throw Error(S(290,t))}return t}function Ss(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mu(t){var e=t._init;return e(t._payload)}function Nd(t){function e(p,h){if(t){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function r(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function n(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function s(p,h){return p=Ft(p,h),p.index=0,p.sibling=null,p}function i(p,h,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,g,x){return h===null||h.tag!==6?(h=ca(g,p.mode,x),h.return=p,h):(h=s(h,g),h.return=p,h)}function u(p,h,g,x){var j=g.type;return j===Rr?d(p,h,g.props.children,x,g.key):h!==null&&(h.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Nt&&mu(j)===h.type)?(x=s(h,g.props),x.ref=gn(p,h,g),x.return=p,x):(x=qs(g.type,g.key,g.props,null,p.mode,x),x.ref=gn(p,h,g),x.return=p,x)}function c(p,h,g,x){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=da(g,p.mode,x),h.return=p,h):(h=s(h,g.children||[]),h.return=p,h)}function d(p,h,g,x,j){return h===null||h.tag!==7?(h=ur(g,p.mode,x,j),h.return=p,h):(h=s(h,g),h.return=p,h)}function m(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ca(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ms:return g=qs(h.type,h.key,h.props,null,p.mode,g),g.ref=gn(p,null,h),g.return=p,g;case Or:return h=da(h,p.mode,g),h.return=p,h;case Nt:var x=h._init;return m(p,x(h._payload),g)}if(wn(h)||dn(h))return h=ur(h,p.mode,g,null),h.return=p,h;Ss(p,h)}return null}function f(p,h,g,x){var j=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:l(p,h,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ms:return g.key===j?u(p,h,g,x):null;case Or:return g.key===j?c(p,h,g,x):null;case Nt:return j=g._init,f(p,h,j(g._payload),x)}if(wn(g)||dn(g))return j!==null?null:d(p,h,g,x,null);Ss(p,g)}return null}function y(p,h,g,x,j){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(g)||null,l(h,p,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ms:return p=p.get(x.key===null?g:x.key)||null,u(h,p,x,j);case Or:return p=p.get(x.key===null?g:x.key)||null,c(h,p,x,j);case Nt:var k=x._init;return y(p,h,g,k(x._payload),j)}if(wn(x)||dn(x))return p=p.get(g)||null,d(h,p,x,j,null);Ss(h,x)}return null}function v(p,h,g,x){for(var j=null,k=null,_=h,E=h=0,$=null;_!==null&&E<g.length;E++){_.index>E?($=_,_=null):$=_.sibling;var L=f(p,_,g[E],x);if(L===null){_===null&&(_=$);break}t&&_&&L.alternate===null&&e(p,_),h=i(L,h,E),k===null?j=L:k.sibling=L,k=L,_=$}if(E===g.length)return r(p,_),K&&Xt(p,E),j;if(_===null){for(;E<g.length;E++)_=m(p,g[E],x),_!==null&&(h=i(_,h,E),k===null?j=_:k.sibling=_,k=_);return K&&Xt(p,E),j}for(_=n(p,_);E<g.length;E++)$=y(_,p,E,g[E],x),$!==null&&(t&&$.alternate!==null&&_.delete($.key===null?E:$.key),h=i($,h,E),k===null?j=$:k.sibling=$,k=$);return t&&_.forEach(function(Oe){return e(p,Oe)}),K&&Xt(p,E),j}function w(p,h,g,x){var j=dn(g);if(typeof j!="function")throw Error(S(150));if(g=j.call(g),g==null)throw Error(S(151));for(var k=j=null,_=h,E=h=0,$=null,L=g.next();_!==null&&!L.done;E++,L=g.next()){_.index>E?($=_,_=null):$=_.sibling;var Oe=f(p,_,L.value,x);if(Oe===null){_===null&&(_=$);break}t&&_&&Oe.alternate===null&&e(p,_),h=i(Oe,h,E),k===null?j=Oe:k.sibling=Oe,k=Oe,_=$}if(L.done)return r(p,_),K&&Xt(p,E),j;if(_===null){for(;!L.done;E++,L=g.next())L=m(p,L.value,x),L!==null&&(h=i(L,h,E),k===null?j=L:k.sibling=L,k=L);return K&&Xt(p,E),j}for(_=n(p,_);!L.done;E++,L=g.next())L=y(_,p,E,L.value,x),L!==null&&(t&&L.alternate!==null&&_.delete(L.key===null?E:L.key),h=i(L,h,E),k===null?j=L:k.sibling=L,k=L);return t&&_.forEach(function(_e){return e(p,_e)}),K&&Xt(p,E),j}function b(p,h,g,x){if(typeof g=="object"&&g!==null&&g.type===Rr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ms:e:{for(var j=g.key,k=h;k!==null;){if(k.key===j){if(j=g.type,j===Rr){if(k.tag===7){r(p,k.sibling),h=s(k,g.props.children),h.return=p,p=h;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Nt&&mu(j)===k.type){r(p,k.sibling),h=s(k,g.props),h.ref=gn(p,k,g),h.return=p,p=h;break e}r(p,k);break}else e(p,k);k=k.sibling}g.type===Rr?(h=ur(g.props.children,p.mode,x,g.key),h.return=p,p=h):(x=qs(g.type,g.key,g.props,null,p.mode,x),x.ref=gn(p,h,g),x.return=p,p=x)}return a(p);case Or:e:{for(k=g.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){r(p,h.sibling),h=s(h,g.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else e(p,h);h=h.sibling}h=da(g,p.mode,x),h.return=p,p=h}return a(p);case Nt:return k=g._init,b(p,h,k(g._payload),x)}if(wn(g))return v(p,h,g,x);if(dn(g))return w(p,h,g,x);Ss(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(r(p,h.sibling),h=s(h,g),h.return=p,p=h):(r(p,h),h=ca(g,p.mode,x),h.return=p,p=h),a(p)):r(p,h)}return b}var Zr=Nd(!0),Ed=Nd(!1),ai=qt(null),oi=null,zr=null,Qo=null;function Yo(){Qo=zr=oi=null}function Xo(t){var e=ai.current;H(ai),t._currentValue=e}function Ya(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Kr(t,e){oi=t,Qo=zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Se=!0),t.firstContext=null)}function He(t){var e=t._currentValue;if(Qo!==t)if(t={context:t,memoizedValue:e,next:null},zr===null){if(oi===null)throw Error(S(308));zr=t,oi.dependencies={lanes:0,firstContext:t}}else zr=zr.next=t;return e}var ir=null;function Zo(t){ir===null?ir=[t]:ir.push(t)}function Td(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Zo(e)):(r.next=s.next,s.next=r),e.interleaved=r,xt(t,n)}function xt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Et=!1;function el(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,z&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,xt(t,r)}return s=n.interleaved,s===null?(e.next=e,Zo(n)):(e.next=s.next,s.next=e),n.interleaved=e,xt(t,r)}function zs(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,zo(t,r)}}function pu(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function li(t,e,r,n){var s=t.updateQueue;Et=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,d=c=u=null,l=i;do{var f=l.lane,y=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(f=e,y=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){m=v.call(y,m,f);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,m,f):v,f==null)break e;m=Y({},m,f);break e;case 2:Et=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=y,u=m):d=d.next=y,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fr|=a,t.lanes=a,t.memoizedState=m}}function gu(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(S(191,s));s.call(n)}}}var ls={},lt=qt(ls),Hn=qt(ls),Kn=qt(ls);function ar(t){if(t===ls)throw Error(S(174));return t}function tl(t,e){switch(W(Kn,e),W(Hn,t),W(lt,ls),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ra(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ra(e,t)}H(lt),W(lt,e)}function en(){H(lt),H(Hn),H(Kn)}function Od(t){ar(Kn.current);var e=ar(lt.current),r=Ra(e,t.type);e!==r&&(W(Hn,t),W(lt,r))}function rl(t){Hn.current===t&&(H(lt),H(Hn))}var J=qt(0);function ui(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sa=[];function nl(){for(var t=0;t<sa.length;t++)sa[t]._workInProgressVersionPrimary=null;sa.length=0}var Ms=bt.ReactCurrentDispatcher,ia=bt.ReactCurrentBatchConfig,hr=0,Q=null,ie=null,oe=null,ci=!1,Cn=!1,Gn=0,Wm=0;function me(){throw Error(S(321))}function sl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!nt(t[r],e[r]))return!1;return!0}function il(t,e,r,n,s,i){if(hr=i,Q=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ms.current=t===null||t.memoizedState===null?Gm:Jm,t=r(n,s),Cn){i=0;do{if(Cn=!1,Gn=0,25<=i)throw Error(S(301));i+=1,oe=ie=null,e.updateQueue=null,Ms.current=Qm,t=r(n,s)}while(Cn)}if(Ms.current=di,e=ie!==null&&ie.next!==null,hr=0,oe=ie=Q=null,ci=!1,e)throw Error(S(300));return t}function al(){var t=Gn!==0;return Gn=0,t}function it(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?Q.memoizedState=oe=t:oe=oe.next=t,oe}function Ke(){if(ie===null){var t=Q.alternate;t=t!==null?t.memoizedState:null}else t=ie.next;var e=oe===null?Q.memoizedState:oe.next;if(e!==null)oe=e,ie=t;else{if(t===null)throw Error(S(310));ie=t,t={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},oe===null?Q.memoizedState=oe=t:oe=oe.next=t}return oe}function Jn(t,e){return typeof e=="function"?e(t):e}function aa(t){var e=Ke(),r=e.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=t;var n=ie,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,u=null,c=i;do{var d=c.lane;if((hr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,a=n):u=u.next=m,Q.lanes|=d,fr|=d}c=c.next}while(c!==null&&c!==i);u===null?a=n:u.next=l,nt(n,e.memoizedState)||(Se=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Q.lanes|=i,fr|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function oa(t){var e=Ke(),r=e.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nt(i,e.memoizedState)||(Se=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Rd(){}function Pd(t,e){var r=Q,n=Ke(),s=e(),i=!nt(n.memoizedState,s);if(i&&(n.memoizedState=s,Se=!0),n=n.queue,ol($d.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||oe!==null&&oe.memoizedState.tag&1){if(r.flags|=2048,Qn(9,Id.bind(null,r,n,s,e),void 0,null),le===null)throw Error(S(349));hr&30||Ad(r,e,s)}return s}function Ad(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Id(t,e,r,n){e.value=r,e.getSnapshot=n,Ld(e)&&Ud(t)}function $d(t,e,r){return r(function(){Ld(e)&&Ud(t)})}function Ld(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!nt(t,r)}catch{return!0}}function Ud(t){var e=xt(t,1);e!==null&&rt(e,t,1,-1)}function yu(t){var e=it();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:t},e.queue=t,t=t.dispatch=Km.bind(null,Q,t),[e.memoizedState,t]}function Qn(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Dd(){return Ke().memoizedState}function Fs(t,e,r,n){var s=it();Q.flags|=t,s.memoizedState=Qn(1|e,r,void 0,n===void 0?null:n)}function Ti(t,e,r,n){var s=Ke();n=n===void 0?null:n;var i=void 0;if(ie!==null){var a=ie.memoizedState;if(i=a.destroy,n!==null&&sl(n,a.deps)){s.memoizedState=Qn(e,r,i,n);return}}Q.flags|=t,s.memoizedState=Qn(1|e,r,i,n)}function vu(t,e){return Fs(8390656,8,t,e)}function ol(t,e){return Ti(2048,8,t,e)}function zd(t,e){return Ti(4,2,t,e)}function Md(t,e){return Ti(4,4,t,e)}function Fd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bd(t,e,r){return r=r!=null?r.concat([t]):null,Ti(4,4,Fd.bind(null,e,t),r)}function ll(){}function Vd(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Wd(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function qd(t,e,r){return hr&21?(nt(r,e)||(r=Qc(),Q.lanes|=r,fr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Se=!0),t.memoizedState=r)}function qm(t,e){var r=F;F=r!==0&&4>r?r:4,t(!0);var n=ia.transition;ia.transition={};try{t(!1),e()}finally{F=r,ia.transition=n}}function Hd(){return Ke().memoizedState}function Hm(t,e,r){var n=Mt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Kd(t))Gd(e,r);else if(r=Td(t,e,r,n),r!==null){var s=xe();rt(r,t,n,s),Jd(r,e,n)}}function Km(t,e,r){var n=Mt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Kd(t))Gd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,nt(l,a)){var u=e.interleaved;u===null?(s.next=s,Zo(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=Td(t,e,s,n),r!==null&&(s=xe(),rt(r,t,n,s),Jd(r,e,n))}}function Kd(t){var e=t.alternate;return t===Q||e!==null&&e===Q}function Gd(t,e){Cn=ci=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Jd(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,zo(t,r)}}var di={readContext:He,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Gm={readContext:He,useCallback:function(t,e){return it().memoizedState=[t,e===void 0?null:e],t},useContext:He,useEffect:vu,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Fs(4194308,4,Fd.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Fs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fs(4,2,t,e)},useMemo:function(t,e){var r=it();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=it();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Hm.bind(null,Q,t),[n.memoizedState,t]},useRef:function(t){var e=it();return t={current:t},e.memoizedState=t},useState:yu,useDebugValue:ll,useDeferredValue:function(t){return it().memoizedState=t},useTransition:function(){var t=yu(!1),e=t[0];return t=qm.bind(null,t[1]),it().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Q,s=it();if(K){if(r===void 0)throw Error(S(407));r=r()}else{if(r=e(),le===null)throw Error(S(349));hr&30||Ad(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,vu($d.bind(null,n,i,t),[t]),n.flags|=2048,Qn(9,Id.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=it(),e=le.identifierPrefix;if(K){var r=pt,n=mt;r=(n&~(1<<32-tt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gn++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Wm++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jm={readContext:He,useCallback:Vd,useContext:He,useEffect:ol,useImperativeHandle:Bd,useInsertionEffect:zd,useLayoutEffect:Md,useMemo:Wd,useReducer:aa,useRef:Dd,useState:function(){return aa(Jn)},useDebugValue:ll,useDeferredValue:function(t){var e=Ke();return qd(e,ie.memoizedState,t)},useTransition:function(){var t=aa(Jn)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Rd,useSyncExternalStore:Pd,useId:Hd,unstable_isNewReconciler:!1},Qm={readContext:He,useCallback:Vd,useContext:He,useEffect:ol,useImperativeHandle:Bd,useInsertionEffect:zd,useLayoutEffect:Md,useMemo:Wd,useReducer:oa,useRef:Dd,useState:function(){return oa(Jn)},useDebugValue:ll,useDeferredValue:function(t){var e=Ke();return ie===null?e.memoizedState=t:qd(e,ie.memoizedState,t)},useTransition:function(){var t=oa(Jn)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Rd,useSyncExternalStore:Pd,useId:Hd,unstable_isNewReconciler:!1};function Qe(t,e){if(t&&t.defaultProps){e=Y({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xa(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Y({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ci={isMounted:function(t){return(t=t._reactInternals)?yr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xe(),s=Mt(t),i=gt(n,s);i.payload=e,r!=null&&(i.callback=r),e=Dt(t,i,s),e!==null&&(rt(e,t,s,n),zs(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xe(),s=Mt(t),i=gt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Dt(t,i,s),e!==null&&(rt(e,t,s,n),zs(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xe(),n=Mt(t),s=gt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Dt(t,s,n),e!==null&&(rt(e,t,n,r),zs(e,t,n))}};function xu(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Bn(r,n)||!Bn(s,i):!0}function Qd(t,e,r){var n=!1,s=Vt,i=e.contextType;return typeof i=="object"&&i!==null?i=He(i):(s=Ee(e)?cr:ye.current,n=e.contextTypes,i=(n=n!=null)?Yr(t,s):Vt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ci,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wu(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ci.enqueueReplaceState(e,e.state,null)}function Za(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},el(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=He(i):(i=Ee(e)?cr:ye.current,s.context=Yr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xa(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ci.enqueueReplaceState(s,s.state,null),li(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function tn(t,e){try{var r="",n=e;do r+=jf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function la(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function eo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ym=typeof WeakMap=="function"?WeakMap:Map;function Yd(t,e,r){r=gt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){fi||(fi=!0,co=n),eo(t,e)},r}function Xd(t,e,r){r=gt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){eo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){eo(t,e),typeof n!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function bu(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ym;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=dp.bind(null,t,e,r),e.then(t,t))}function _u(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ku(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gt(-1,1),e.tag=2,Dt(r,e,1))),r.lanes|=1),t)}var Xm=bt.ReactCurrentOwner,Se=!1;function ve(t,e,r,n){e.child=t===null?Ed(e,null,r,n):Zr(e,t.child,r,n)}function ju(t,e,r,n,s){r=r.render;var i=e.ref;return Kr(e,s),n=il(t,e,r,n,i,s),r=al(),t!==null&&!Se?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wt(t,e,s)):(K&&r&&Ko(e),e.flags|=1,ve(t,e,n,s),e.child)}function Su(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!gl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Zd(t,e,i,n,s)):(t=qs(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bn,r(a,n)&&t.ref===e.ref)return wt(t,e,s)}return e.flags|=1,t=Ft(i,n),t.ref=e.ref,t.return=e,e.child=t}function Zd(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Bn(i,n)&&t.ref===e.ref)if(Se=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Se=!0);else return e.lanes=t.lanes,wt(t,e,s)}return to(t,e,r,n,s)}function eh(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(Fr,Ae),Ae|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,W(Fr,Ae),Ae|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,W(Fr,Ae),Ae|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,W(Fr,Ae),Ae|=n;return ve(t,e,s,r),e.child}function th(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function to(t,e,r,n,s){var i=Ee(r)?cr:ye.current;return i=Yr(e,i),Kr(e,s),r=il(t,e,r,n,i,s),n=al(),t!==null&&!Se?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wt(t,e,s)):(K&&n&&Ko(e),e.flags|=1,ve(t,e,r,s),e.child)}function Nu(t,e,r,n,s){if(Ee(r)){var i=!0;ni(e)}else i=!1;if(Kr(e,s),e.stateNode===null)Bs(t,e),Qd(e,r,n),Za(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=He(c):(c=Ee(r)?cr:ye.current,c=Yr(e,c));var d=r.getDerivedStateFromProps,m=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||u!==c)&&wu(e,a,n,c),Et=!1;var f=e.memoizedState;a.state=f,li(e,n,a,s),u=e.memoizedState,l!==n||f!==u||Ne.current||Et?(typeof d=="function"&&(Xa(e,r,d,n),u=e.memoizedState),(l=Et||xu(e,r,l,n,f,u,c))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=c,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Cd(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Qe(e.type,l),a.props=c,m=e.pendingProps,f=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=He(u):(u=Ee(r)?cr:ye.current,u=Yr(e,u));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||f!==u)&&wu(e,a,n,u),Et=!1,f=e.memoizedState,a.state=f,li(e,n,a,s);var v=e.memoizedState;l!==m||f!==v||Ne.current||Et?(typeof y=="function"&&(Xa(e,r,y,n),v=e.memoizedState),(c=Et||xu(e,r,c,n,f,v,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return ro(t,e,r,n,i,s)}function ro(t,e,r,n,s,i){th(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&du(e,r,!1),wt(t,e,i);n=e.stateNode,Xm.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Zr(e,t.child,null,i),e.child=Zr(e,null,l,i)):ve(t,e,l,i),e.memoizedState=n.state,s&&du(e,r,!0),e.child}function rh(t){var e=t.stateNode;e.pendingContext?cu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cu(t,e.context,!1),tl(t,e.containerInfo)}function Eu(t,e,r,n,s){return Xr(),Jo(s),e.flags|=256,ve(t,e,r,n),e.child}var no={dehydrated:null,treeContext:null,retryLane:0};function so(t){return{baseLanes:t,cachePool:null,transitions:null}}function nh(t,e,r){var n=e.pendingProps,s=J.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),W(J,s&1),t===null)return Qa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Pi(a,n,0,null),t=ur(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=so(r),e.memoizedState=no,t):ul(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Zm(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Ft(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ft(l,i):(i=ur(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?so(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=no,n}return i=t.child,t=i.sibling,n=Ft(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ul(t,e){return e=Pi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ns(t,e,r,n){return n!==null&&Jo(n),Zr(e,t.child,null,r),t=ul(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zm(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=la(Error(S(422))),Ns(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Pi({mode:"visible",children:n.children},s,0,null),i=ur(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Zr(e,t.child,null,a),e.child.memoizedState=so(a),e.memoizedState=no,i);if(!(e.mode&1))return Ns(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(S(419)),n=la(i,n,void 0),Ns(t,e,a,n)}if(l=(a&t.childLanes)!==0,Se||l){if(n=le,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xt(t,s),rt(n,t,s,-1))}return pl(),n=la(Error(S(421))),Ns(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hp.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Le=Ut(s.nextSibling),Ue=e,K=!0,et=null,t!==null&&(Be[Ve++]=mt,Be[Ve++]=pt,Be[Ve++]=dr,mt=t.id,pt=t.overflow,dr=e),e=ul(e,n.children),e.flags|=4096,e)}function Tu(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ya(t.return,e,r)}function ua(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function sh(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(ve(t,e,n.children,r),n=J.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tu(t,r,e);else if(t.tag===19)Tu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(W(J,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ui(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ua(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ui(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ua(e,!0,r,null,i);break;case"together":ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,r=Ft(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ft(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ep(t,e,r){switch(e.tag){case 3:rh(e),Xr();break;case 5:Od(e);break;case 1:Ee(e.type)&&ni(e);break;case 4:tl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;W(ai,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(W(J,J.current&1),e.flags|=128,null):r&e.child.childLanes?nh(t,e,r):(W(J,J.current&1),t=wt(t,e,r),t!==null?t.sibling:null);W(J,J.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return sh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),W(J,J.current),n)break;return null;case 22:case 23:return e.lanes=0,eh(t,e,r)}return wt(t,e,r)}var ih,io,ah,oh;ih=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};io=function(){};ah=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ar(lt.current);var i=null;switch(r){case"input":s=Ea(t,s),n=Ea(t,n),i=[];break;case"select":s=Y({},s,{value:void 0}),n=Y({},n,{value:void 0}),i=[];break;case"textarea":s=Oa(t,s),n=Oa(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ti)}Pa(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($n.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($n.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&q("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};oh=function(t,e,r,n){r!==n&&(e.flags|=4)};function yn(t,e){if(!K)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function tp(t,e,r){var n=e.pendingProps;switch(Go(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(e),null;case 1:return Ee(e.type)&&ri(),pe(e),null;case 3:return n=e.stateNode,en(),H(Ne),H(ye),nl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(js(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,et!==null&&(mo(et),et=null))),io(t,e),pe(e),null;case 5:rl(e);var s=ar(Kn.current);if(r=e.type,t!==null&&e.stateNode!=null)ah(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(S(166));return pe(e),null}if(t=ar(lt.current),js(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[at]=e,n[qn]=i,t=(e.mode&1)!==0,r){case"dialog":q("cancel",n),q("close",n);break;case"iframe":case"object":case"embed":q("load",n);break;case"video":case"audio":for(s=0;s<_n.length;s++)q(_n[s],n);break;case"source":q("error",n);break;case"img":case"image":case"link":q("error",n),q("load",n);break;case"details":q("toggle",n);break;case"input":Ul(n,i),q("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},q("invalid",n);break;case"textarea":zl(n,i),q("invalid",n)}Pa(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ks(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ks(n.textContent,l,t),s=["children",""+l]):$n.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&q("scroll",n)}switch(r){case"input":ps(n),Dl(n,i,!0);break;case"textarea":ps(n),Ml(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ti)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$c(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[at]=e,t[qn]=n,ih(t,e,!1,!1),e.stateNode=t;e:{switch(a=Aa(r,n),r){case"dialog":q("cancel",t),q("close",t),s=n;break;case"iframe":case"object":case"embed":q("load",t),s=n;break;case"video":case"audio":for(s=0;s<_n.length;s++)q(_n[s],t);s=n;break;case"source":q("error",t),s=n;break;case"img":case"image":case"link":q("error",t),q("load",t),s=n;break;case"details":q("toggle",t),s=n;break;case"input":Ul(t,n),s=Ea(t,n),q("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Y({},n,{value:void 0}),q("invalid",t);break;case"textarea":zl(t,n),s=Oa(t,n),q("invalid",t);break;default:s=n}Pa(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Dc(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lc(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ln(t,u):typeof u=="number"&&Ln(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($n.hasOwnProperty(i)?u!=null&&i==="onScroll"&&q("scroll",t):u!=null&&Ao(t,i,u,a))}switch(r){case"input":ps(t),Dl(t,n,!1);break;case"textarea":ps(t),Ml(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Vr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Vr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pe(e),null;case 6:if(t&&e.stateNode!=null)oh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(S(166));if(r=ar(Kn.current),ar(lt.current),js(e)){if(n=e.stateNode,r=e.memoizedProps,n[at]=e,(i=n.nodeValue!==r)&&(t=Ue,t!==null))switch(t.tag){case 3:ks(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ks(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[at]=e,e.stateNode=n}return pe(e),null;case 13:if(H(J),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(K&&Le!==null&&e.mode&1&&!(e.flags&128))Sd(),Xr(),e.flags|=98560,i=!1;else if(i=js(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(S(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(S(317));i[at]=e}else Xr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pe(e),i=!1}else et!==null&&(mo(et),et=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?ae===0&&(ae=3):pl())),e.updateQueue!==null&&(e.flags|=4),pe(e),null);case 4:return en(),io(t,e),t===null&&Vn(e.stateNode.containerInfo),pe(e),null;case 10:return Xo(e.type._context),pe(e),null;case 17:return Ee(e.type)&&ri(),pe(e),null;case 19:if(H(J),i=e.memoizedState,i===null)return pe(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)yn(i,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ui(t),a!==null){for(e.flags|=128,yn(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return W(J,J.current&1|2),e.child}t=t.sibling}i.tail!==null&&te()>rn&&(e.flags|=128,n=!0,yn(i,!1),e.lanes=4194304)}else{if(!n)if(t=ui(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!K)return pe(e),null}else 2*te()-i.renderingStartTime>rn&&r!==1073741824&&(e.flags|=128,n=!0,yn(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=te(),e.sibling=null,r=J.current,W(J,n?r&1|2:r&1),e):(pe(e),null);case 22:case 23:return ml(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ae&1073741824&&(pe(e),e.subtreeFlags&6&&(e.flags|=8192)):pe(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function rp(t,e){switch(Go(e),e.tag){case 1:return Ee(e.type)&&ri(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return en(),H(Ne),H(ye),nl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rl(e),null;case 13:if(H(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Xr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return H(J),null;case 4:return en(),null;case 10:return Xo(e.type._context),null;case 22:case 23:return ml(),null;case 24:return null;default:return null}}var Es=!1,ge=!1,np=typeof WeakSet=="function"?WeakSet:Set,O=null;function Mr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Z(t,e,n)}else r.current=null}function ao(t,e,r){try{r()}catch(n){Z(t,e,n)}}var Cu=!1;function sp(t,e){if(Va=Xs,t=hd(),Ho(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,m=t,f=null;t:for(;;){for(var y;m!==r||s!==0&&m.nodeType!==3||(l=a+s),m!==i||n!==0&&m.nodeType!==3||(u=a+n),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===r&&++c===s&&(l=a),f===i&&++d===n&&(u=a),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wa={focusedElem:t,selectionRange:r},Xs=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:Qe(e.type,w),b);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(x){Z(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return v=Cu,Cu=!1,v}function On(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ao(e,r,i)}s=s.next}while(s!==n)}}function Oi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function oo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function lh(t){var e=t.alternate;e!==null&&(t.alternate=null,lh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[at],delete e[qn],delete e[Ka],delete e[Mm],delete e[Fm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uh(t){return t.tag===5||t.tag===3||t.tag===4}function Ou(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ti));else if(n!==4&&(t=t.child,t!==null))for(lo(t,e,r),t=t.sibling;t!==null;)lo(t,e,r),t=t.sibling}function uo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(uo(t,e,r),t=t.sibling;t!==null;)uo(t,e,r),t=t.sibling}var de=null,Xe=!1;function St(t,e,r){for(r=r.child;r!==null;)ch(t,e,r),r=r.sibling}function ch(t,e,r){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(_i,r)}catch{}switch(r.tag){case 5:ge||Mr(r,e);case 6:var n=de,s=Xe;de=null,St(t,e,r),de=n,Xe=s,de!==null&&(Xe?(t=de,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):de.removeChild(r.stateNode));break;case 18:de!==null&&(Xe?(t=de,r=r.stateNode,t.nodeType===8?ra(t.parentNode,r):t.nodeType===1&&ra(t,r),Mn(t)):ra(de,r.stateNode));break;case 4:n=de,s=Xe,de=r.stateNode.containerInfo,Xe=!0,St(t,e,r),de=n,Xe=s;break;case 0:case 11:case 14:case 15:if(!ge&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ao(r,e,a),s=s.next}while(s!==n)}St(t,e,r);break;case 1:if(!ge&&(Mr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Z(r,e,l)}St(t,e,r);break;case 21:St(t,e,r);break;case 22:r.mode&1?(ge=(n=ge)||r.memoizedState!==null,St(t,e,r),ge=n):St(t,e,r);break;default:St(t,e,r)}}function Ru(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new np),e.forEach(function(n){var s=fp.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ge(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:de=l.stateNode,Xe=!1;break e;case 3:de=l.stateNode.containerInfo,Xe=!0;break e;case 4:de=l.stateNode.containerInfo,Xe=!0;break e}l=l.return}if(de===null)throw Error(S(160));ch(i,a,s),de=null,Xe=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Z(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dh(e,t),e=e.sibling}function dh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),st(t),n&4){try{On(3,t,t.return),Oi(3,t)}catch(w){Z(t,t.return,w)}try{On(5,t,t.return)}catch(w){Z(t,t.return,w)}}break;case 1:Ge(e,t),st(t),n&512&&r!==null&&Mr(r,r.return);break;case 5:if(Ge(e,t),st(t),n&512&&r!==null&&Mr(r,r.return),t.flags&32){var s=t.stateNode;try{Ln(s,"")}catch(w){Z(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ac(s,i),Aa(l,a);var c=Aa(l,i);for(a=0;a<u.length;a+=2){var d=u[a],m=u[a+1];d==="style"?Dc(s,m):d==="dangerouslySetInnerHTML"?Lc(s,m):d==="children"?Ln(s,m):Ao(s,d,m,c)}switch(l){case"input":Ta(s,i);break;case"textarea":Ic(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Vr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Vr(s,!!i.multiple,i.defaultValue,!0):Vr(s,!!i.multiple,i.multiple?[]:"",!1))}s[qn]=i}catch(w){Z(t,t.return,w)}}break;case 6:if(Ge(e,t),st(t),n&4){if(t.stateNode===null)throw Error(S(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Z(t,t.return,w)}}break;case 3:if(Ge(e,t),st(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(e.containerInfo)}catch(w){Z(t,t.return,w)}break;case 4:Ge(e,t),st(t);break;case 13:Ge(e,t),st(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hl=te())),n&4&&Ru(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ge=(c=ge)||d,Ge(e,t),ge=c):Ge(e,t),st(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(O=t,d=t.child;d!==null;){for(m=O=d;O!==null;){switch(f=O,y=f.child,f.tag){case 0:case 11:case 14:case 15:On(4,f,f.return);break;case 1:Mr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Z(n,r,w)}}break;case 5:Mr(f,f.return);break;case 22:if(f.memoizedState!==null){Au(m);continue}}y!==null?(y.return=f,O=y):Au(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Uc("display",a))}catch(w){Z(t,t.return,w)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(w){Z(t,t.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ge(e,t),st(t),n&4&&Ru(t);break;case 21:break;default:Ge(e,t),st(t)}}function st(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(uh(r)){var n=r;break e}r=r.return}throw Error(S(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ln(s,""),n.flags&=-33);var i=Ou(t);uo(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Ou(t);lo(t,l,a);break;default:throw Error(S(161))}}catch(u){Z(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ip(t,e,r){O=t,hh(t)}function hh(t,e,r){for(var n=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Es;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ge;l=Es;var c=ge;if(Es=a,(ge=u)&&!c)for(O=s;O!==null;)a=O,u=a.child,a.tag===22&&a.memoizedState!==null?Iu(s):u!==null?(u.return=a,O=u):Iu(s);for(;i!==null;)O=i,hh(i),i=i.sibling;O=s,Es=l,ge=c}Pu(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):Pu(t)}}function Pu(t){for(;O!==null;){var e=O;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ge||Oi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ge)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Qe(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gu(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}gu(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Mn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}ge||e.flags&512&&oo(e)}catch(f){Z(e,e.return,f)}}if(e===t){O=null;break}if(r=e.sibling,r!==null){r.return=e.return,O=r;break}O=e.return}}function Au(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var r=e.sibling;if(r!==null){r.return=e.return,O=r;break}O=e.return}}function Iu(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Oi(4,e)}catch(u){Z(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){Z(e,s,u)}}var i=e.return;try{oo(e)}catch(u){Z(e,i,u)}break;case 5:var a=e.return;try{oo(e)}catch(u){Z(e,a,u)}}}catch(u){Z(e,e.return,u)}if(e===t){O=null;break}var l=e.sibling;if(l!==null){l.return=e.return,O=l;break}O=e.return}}var ap=Math.ceil,hi=bt.ReactCurrentDispatcher,cl=bt.ReactCurrentOwner,qe=bt.ReactCurrentBatchConfig,z=0,le=null,ne=null,he=0,Ae=0,Fr=qt(0),ae=0,Yn=null,fr=0,Ri=0,dl=0,Rn=null,je=null,hl=0,rn=1/0,dt=null,fi=!1,co=null,zt=null,Ts=!1,At=null,mi=0,Pn=0,ho=null,Vs=-1,Ws=0;function xe(){return z&6?te():Vs!==-1?Vs:Vs=te()}function Mt(t){return t.mode&1?z&2&&he!==0?he&-he:Vm.transition!==null?(Ws===0&&(Ws=Qc()),Ws):(t=F,t!==0||(t=window.event,t=t===void 0?16:nd(t.type)),t):1}function rt(t,e,r,n){if(50<Pn)throw Pn=0,ho=null,Error(S(185));is(t,r,n),(!(z&2)||t!==le)&&(t===le&&(!(z&2)&&(Ri|=r),ae===4&&Ot(t,he)),Te(t,n),r===1&&z===0&&!(e.mode&1)&&(rn=te()+500,Ei&&Ht()))}function Te(t,e){var r=t.callbackNode;Vf(t,e);var n=Ys(t,t===le?he:0);if(n===0)r!==null&&Vl(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Vl(r),e===1)t.tag===0?Bm($u.bind(null,t)):_d($u.bind(null,t)),Dm(function(){!(z&6)&&Ht()}),r=null;else{switch(Yc(n)){case 1:r=Do;break;case 4:r=Gc;break;case 16:r=Qs;break;case 536870912:r=Jc;break;default:r=Qs}r=wh(r,fh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function fh(t,e){if(Vs=-1,Ws=0,z&6)throw Error(S(327));var r=t.callbackNode;if(Gr()&&t.callbackNode!==r)return null;var n=Ys(t,t===le?he:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=pi(t,n);else{e=n;var s=z;z|=2;var i=ph();(le!==t||he!==e)&&(dt=null,rn=te()+500,lr(t,e));do try{up();break}catch(l){mh(t,l)}while(!0);Yo(),hi.current=i,z=s,ne!==null?e=0:(le=null,he=0,e=ae)}if(e!==0){if(e===2&&(s=Da(t),s!==0&&(n=s,e=fo(t,s))),e===1)throw r=Yn,lr(t,0),Ot(t,n),Te(t,te()),r;if(e===6)Ot(t,n);else{if(s=t.current.alternate,!(n&30)&&!op(s)&&(e=pi(t,n),e===2&&(i=Da(t),i!==0&&(n=i,e=fo(t,i))),e===1))throw r=Yn,lr(t,0),Ot(t,n),Te(t,te()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(S(345));case 2:Zt(t,je,dt);break;case 3:if(Ot(t,n),(n&130023424)===n&&(e=hl+500-te(),10<e)){if(Ys(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){xe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ha(Zt.bind(null,t,je,dt),e);break}Zt(t,je,dt);break;case 4:if(Ot(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-tt(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ap(n/1960))-n,10<n){t.timeoutHandle=Ha(Zt.bind(null,t,je,dt),n);break}Zt(t,je,dt);break;case 5:Zt(t,je,dt);break;default:throw Error(S(329))}}}return Te(t,te()),t.callbackNode===r?fh.bind(null,t):null}function fo(t,e){var r=Rn;return t.current.memoizedState.isDehydrated&&(lr(t,e).flags|=256),t=pi(t,e),t!==2&&(e=je,je=r,e!==null&&mo(e)),t}function mo(t){je===null?je=t:je.push.apply(je,t)}function op(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!nt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ot(t,e){for(e&=~dl,e&=~Ri,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-tt(e),n=1<<r;t[r]=-1,e&=~n}}function $u(t){if(z&6)throw Error(S(327));Gr();var e=Ys(t,0);if(!(e&1))return Te(t,te()),null;var r=pi(t,e);if(t.tag!==0&&r===2){var n=Da(t);n!==0&&(e=n,r=fo(t,n))}if(r===1)throw r=Yn,lr(t,0),Ot(t,e),Te(t,te()),r;if(r===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zt(t,je,dt),Te(t,te()),null}function fl(t,e){var r=z;z|=1;try{return t(e)}finally{z=r,z===0&&(rn=te()+500,Ei&&Ht())}}function mr(t){At!==null&&At.tag===0&&!(z&6)&&Gr();var e=z;z|=1;var r=qe.transition,n=F;try{if(qe.transition=null,F=1,t)return t()}finally{F=n,qe.transition=r,z=e,!(z&6)&&Ht()}}function ml(){Ae=Fr.current,H(Fr)}function lr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Um(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(Go(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ri();break;case 3:en(),H(Ne),H(ye),nl();break;case 5:rl(n);break;case 4:en();break;case 13:H(J);break;case 19:H(J);break;case 10:Xo(n.type._context);break;case 22:case 23:ml()}r=r.return}if(le=t,ne=t=Ft(t.current,null),he=Ae=e,ae=0,Yn=null,dl=Ri=fr=0,je=Rn=null,ir!==null){for(e=0;e<ir.length;e++)if(r=ir[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}ir=null}return t}function mh(t,e){do{var r=ne;try{if(Yo(),Ms.current=di,ci){for(var n=Q.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ci=!1}if(hr=0,oe=ie=Q=null,Cn=!1,Gn=0,cl.current=null,r===null||r.return===null){ae=1,Yn=e,ne=null;break}e:{var i=t,a=r.return,l=r,u=e;if(e=he,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=_u(a);if(y!==null){y.flags&=-257,ku(y,a,l,i,e),y.mode&1&&bu(i,c,e),e=y,u=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){bu(i,c,e),pl();break e}u=Error(S(426))}}else if(K&&l.mode&1){var b=_u(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ku(b,a,l,i,e),Jo(tn(u,l));break e}}i=u=tn(u,l),ae!==4&&(ae=2),Rn===null?Rn=[i]:Rn.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Yd(i,u,e);pu(i,p);break e;case 1:l=u;var h=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(zt===null||!zt.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Xd(i,l,e);pu(i,x);break e}}i=i.return}while(i!==null)}yh(r)}catch(j){e=j,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function ph(){var t=hi.current;return hi.current=di,t===null?di:t}function pl(){(ae===0||ae===3||ae===2)&&(ae=4),le===null||!(fr&268435455)&&!(Ri&268435455)||Ot(le,he)}function pi(t,e){var r=z;z|=2;var n=ph();(le!==t||he!==e)&&(dt=null,lr(t,e));do try{lp();break}catch(s){mh(t,s)}while(!0);if(Yo(),z=r,hi.current=n,ne!==null)throw Error(S(261));return le=null,he=0,ae}function lp(){for(;ne!==null;)gh(ne)}function up(){for(;ne!==null&&!If();)gh(ne)}function gh(t){var e=xh(t.alternate,t,Ae);t.memoizedProps=t.pendingProps,e===null?yh(t):ne=e,cl.current=null}function yh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=rp(r,e),r!==null){r.flags&=32767,ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,ne=null;return}}else if(r=tp(r,e,Ae),r!==null){ne=r;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);ae===0&&(ae=5)}function Zt(t,e,r){var n=F,s=qe.transition;try{qe.transition=null,F=1,cp(t,e,r,n)}finally{qe.transition=s,F=n}return null}function cp(t,e,r,n){do Gr();while(At!==null);if(z&6)throw Error(S(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Wf(t,i),t===le&&(ne=le=null,he=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ts||(Ts=!0,wh(Qs,function(){return Gr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=qe.transition,qe.transition=null;var a=F;F=1;var l=z;z|=4,cl.current=null,sp(t,r),dh(r,t),Om(Wa),Xs=!!Va,Wa=Va=null,t.current=r,ip(r),$f(),z=l,F=a,qe.transition=i}else t.current=r;if(Ts&&(Ts=!1,At=t,mi=s),i=t.pendingLanes,i===0&&(zt=null),Df(r.stateNode),Te(t,te()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fi)throw fi=!1,t=co,co=null,t;return mi&1&&t.tag!==0&&Gr(),i=t.pendingLanes,i&1?t===ho?Pn++:(Pn=0,ho=t):Pn=0,Ht(),null}function Gr(){if(At!==null){var t=Yc(mi),e=qe.transition,r=F;try{if(qe.transition=null,F=16>t?16:t,At===null)var n=!1;else{if(t=At,At=null,mi=0,z&6)throw Error(S(331));var s=z;for(z|=4,O=t.current;O!==null;){var i=O,a=i.child;if(O.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(O=c;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:On(8,d,i)}var m=d.child;if(m!==null)m.return=d,O=m;else for(;O!==null;){d=O;var f=d.sibling,y=d.return;if(lh(d),d===c){O=null;break}if(f!==null){f.return=y,O=f;break}O=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}O=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,O=a;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:On(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,O=p;break e}O=i.return}}var h=t.current;for(O=h;O!==null;){a=O;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,O=g;else e:for(a=h;O!==null;){if(l=O,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oi(9,l)}}catch(j){Z(l,l.return,j)}if(l===a){O=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,O=x;break e}O=l.return}}if(z=s,Ht(),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(_i,t)}catch{}n=!0}return n}finally{F=r,qe.transition=e}}return!1}function Lu(t,e,r){e=tn(r,e),e=Yd(t,e,1),t=Dt(t,e,1),e=xe(),t!==null&&(is(t,1,e),Te(t,e))}function Z(t,e,r){if(t.tag===3)Lu(t,t,r);else for(;e!==null;){if(e.tag===3){Lu(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zt===null||!zt.has(n))){t=tn(r,t),t=Xd(e,t,1),e=Dt(e,t,1),t=xe(),e!==null&&(is(e,1,t),Te(e,t));break}}e=e.return}}function dp(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&r,le===t&&(he&r)===r&&(ae===4||ae===3&&(he&130023424)===he&&500>te()-hl?lr(t,0):dl|=r),Te(t,e)}function vh(t,e){e===0&&(t.mode&1?(e=vs,vs<<=1,!(vs&130023424)&&(vs=4194304)):e=1);var r=xe();t=xt(t,e),t!==null&&(is(t,e,r),Te(t,r))}function hp(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vh(t,r)}function fp(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(S(314))}n!==null&&n.delete(e),vh(t,r)}var xh;xh=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ne.current)Se=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Se=!1,ep(t,e,r);Se=!!(t.flags&131072)}else Se=!1,K&&e.flags&1048576&&kd(e,ii,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bs(t,e),t=e.pendingProps;var s=Yr(e,ye.current);Kr(e,r),s=il(null,e,n,t,s,r);var i=al();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ee(n)?(i=!0,ni(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,el(e),s.updater=Ci,e.stateNode=s,s._reactInternals=e,Za(e,n,t,r),e=ro(null,e,n,!0,i,r)):(e.tag=0,K&&i&&Ko(e),ve(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Bs(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=pp(n),t=Qe(n,t),s){case 0:e=to(null,e,n,t,r);break e;case 1:e=Nu(null,e,n,t,r);break e;case 11:e=ju(null,e,n,t,r);break e;case 14:e=Su(null,e,n,Qe(n.type,t),r);break e}throw Error(S(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),to(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),Nu(t,e,n,s,r);case 3:e:{if(rh(e),t===null)throw Error(S(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Cd(t,e),li(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=tn(Error(S(423)),e),e=Eu(t,e,n,r,s);break e}else if(n!==s){s=tn(Error(S(424)),e),e=Eu(t,e,n,r,s);break e}else for(Le=Ut(e.stateNode.containerInfo.firstChild),Ue=e,K=!0,et=null,r=Ed(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xr(),n===s){e=wt(t,e,r);break e}ve(t,e,n,r)}e=e.child}return e;case 5:return Od(e),t===null&&Qa(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,qa(n,s)?a=null:i!==null&&qa(n,i)&&(e.flags|=32),th(t,e),ve(t,e,a,r),e.child;case 6:return t===null&&Qa(e),null;case 13:return nh(t,e,r);case 4:return tl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Zr(e,null,n,r):ve(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),ju(t,e,n,s,r);case 7:return ve(t,e,e.pendingProps,r),e.child;case 8:return ve(t,e,e.pendingProps.children,r),e.child;case 12:return ve(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,W(ai,n._currentValue),n._currentValue=a,i!==null)if(nt(i.value,a)){if(i.children===s.children&&!Ne.current){e=wt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=gt(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),Ya(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(S(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Ya(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ve(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Kr(e,r),s=He(s),n=n(s),e.flags|=1,ve(t,e,n,r),e.child;case 14:return n=e.type,s=Qe(n,e.pendingProps),s=Qe(n.type,s),Su(t,e,n,s,r);case 15:return Zd(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),Bs(t,e),e.tag=1,Ee(n)?(t=!0,ni(e)):t=!1,Kr(e,r),Qd(e,n,s),Za(e,n,s,r),ro(null,e,n,!0,t,r);case 19:return sh(t,e,r);case 22:return eh(t,e,r)}throw Error(S(156,e.tag))};function wh(t,e){return Kc(t,e)}function mp(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(t,e,r,n){return new mp(t,e,r,n)}function gl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pp(t){if(typeof t=="function")return gl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$o)return 11;if(t===Lo)return 14}return 2}function Ft(t,e){var r=t.alternate;return r===null?(r=We(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function qs(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")gl(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Rr:return ur(r.children,s,i,e);case Io:a=8,s|=8;break;case ka:return t=We(12,r,e,s|2),t.elementType=ka,t.lanes=i,t;case ja:return t=We(13,r,e,s),t.elementType=ja,t.lanes=i,t;case Sa:return t=We(19,r,e,s),t.elementType=Sa,t.lanes=i,t;case Oc:return Pi(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tc:a=10;break e;case Cc:a=9;break e;case $o:a=11;break e;case Lo:a=14;break e;case Nt:a=16,n=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=We(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ur(t,e,r,n){return t=We(7,t,n,e),t.lanes=r,t}function Pi(t,e,r,n){return t=We(22,t,n,e),t.elementType=Oc,t.lanes=r,t.stateNode={isHidden:!1},t}function ca(t,e,r){return t=We(6,t,null,e),t.lanes=r,t}function da(t,e,r){return e=We(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gp(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qi(0),this.expirationTimes=qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yl(t,e,r,n,s,i,a,l,u){return t=new gp(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=We(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},el(i),t}function yp(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Or,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function bh(t){if(!t)return Vt;t=t._reactInternals;e:{if(yr(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ee(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var r=t.type;if(Ee(r))return bd(t,r,e)}return e}function _h(t,e,r,n,s,i,a,l,u){return t=yl(r,n,!0,t,s,i,a,l,u),t.context=bh(null),r=t.current,n=xe(),s=Mt(r),i=gt(n,s),i.callback=e??null,Dt(r,i,s),t.current.lanes=s,is(t,s,n),Te(t,n),t}function Ai(t,e,r,n){var s=e.current,i=xe(),a=Mt(s);return r=bh(r),e.context===null?e.context=r:e.pendingContext=r,e=gt(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dt(s,e,a),t!==null&&(rt(t,s,a,i),zs(t,s,a)),a}function gi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vl(t,e){Uu(t,e),(t=t.alternate)&&Uu(t,e)}function vp(){return null}var kh=typeof reportError=="function"?reportError:function(t){console.error(t)};function xl(t){this._internalRoot=t}Ii.prototype.render=xl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));Ai(t,e,null,null)};Ii.prototype.unmount=xl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mr(function(){Ai(null,t,null,null)}),e[vt]=null}};function Ii(t){this._internalRoot=t}Ii.prototype.unstable_scheduleHydration=function(t){if(t){var e=ed();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ct.length&&e!==0&&e<Ct[r].priority;r++);Ct.splice(r,0,t),r===0&&rd(t)}};function wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $i(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Du(){}function xp(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=gi(a);i.call(c)}}var a=_h(e,n,t,0,null,!1,!1,"",Du);return t._reactRootContainer=a,t[vt]=a.current,Vn(t.nodeType===8?t.parentNode:t),mr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=gi(u);l.call(c)}}var u=yl(t,0,!1,null,null,!1,!1,"",Du);return t._reactRootContainer=u,t[vt]=u.current,Vn(t.nodeType===8?t.parentNode:t),mr(function(){Ai(e,u,r,n)}),u}function Li(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=gi(a);l.call(u)}}Ai(e,a,t,s)}else a=xp(r,e,t,s,n);return gi(a)}Xc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=bn(e.pendingLanes);r!==0&&(zo(e,r|1),Te(e,te()),!(z&6)&&(rn=te()+500,Ht()))}break;case 13:mr(function(){var n=xt(t,1);if(n!==null){var s=xe();rt(n,t,1,s)}}),vl(t,1)}};Mo=function(t){if(t.tag===13){var e=xt(t,134217728);if(e!==null){var r=xe();rt(e,t,134217728,r)}vl(t,134217728)}};Zc=function(t){if(t.tag===13){var e=Mt(t),r=xt(t,e);if(r!==null){var n=xe();rt(r,t,e,n)}vl(t,e)}};ed=function(){return F};td=function(t,e){var r=F;try{return F=t,e()}finally{F=r}};$a=function(t,e,r){switch(e){case"input":if(Ta(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Ni(n);if(!s)throw Error(S(90));Pc(n),Ta(n,s)}}}break;case"textarea":Ic(t,r);break;case"select":e=r.value,e!=null&&Vr(t,!!r.multiple,e,!1)}};Fc=fl;Bc=mr;var wp={usingClientEntryPoint:!1,Events:[os,$r,Ni,zc,Mc,fl]},vn={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bp={bundleType:vn.bundleType,version:vn.version,rendererPackageName:vn.rendererPackageName,rendererConfig:vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qc(t),t===null?null:t.stateNode},findFiberByHostInstance:vn.findFiberByHostInstance||vp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{_i=Cs.inject(bp),ot=Cs}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wp;ze.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wl(e))throw Error(S(200));return yp(t,e,null,r)};ze.createRoot=function(t,e){if(!wl(t))throw Error(S(299));var r=!1,n="",s=kh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yl(t,1,!1,null,null,r,!1,n,s),t[vt]=e.current,Vn(t.nodeType===8?t.parentNode:t),new xl(e)};ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=qc(e),t=t===null?null:t.stateNode,t};ze.flushSync=function(t){return mr(t)};ze.hydrate=function(t,e,r){if(!$i(e))throw Error(S(200));return Li(null,t,e,!0,r)};ze.hydrateRoot=function(t,e,r){if(!wl(t))throw Error(S(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=kh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=_h(e,null,t,1,r??null,s,!1,i,a),t[vt]=e.current,Vn(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ii(e)};ze.render=function(t,e,r){if(!$i(e))throw Error(S(200));return Li(null,t,e,!1,r)};ze.unmountComponentAtNode=function(t){if(!$i(t))throw Error(S(40));return t._reactRootContainer?(mr(function(){Li(null,null,t,!1,function(){t._reactRootContainer=null,t[vt]=null})}),!0):!1};ze.unstable_batchedUpdates=fl;ze.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$i(r))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return Li(t,e,r,!1,n)};ze.version="18.3.1-next-f1338f8080-20240426";function jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jh)}catch(t){console.error(t)}}jh(),jc.exports=ze;var _p=jc.exports,zu=_p;ba.createRoot=zu.createRoot,ba.hydrateRoot=zu.hydrateRoot;function ut({variant:t="default"}){return t==="landing"?o.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-8 md:px-24 py-8",children:[o.jsx("div",{className:"flex items-center gap-2 group cursor-pointer",children:o.jsx("h2",{className:"brand-font text-white text-2xl font-medium tracking-tight",children:"RegalosQueCantan"})}),o.jsxs("nav",{className:"hidden lg:flex items-center gap-12",children:[o.jsx("a",{className:"text-white/80 text-sm font-medium tracking-wide hover:text-white transition-colors uppercase",href:"#",children:"Muestras"}),o.jsx("a",{className:"text-white/80 text-sm font-medium tracking-wide hover:text-white transition-colors uppercase",href:"#",children:"El Proceso"}),o.jsx("a",{className:"text-white/80 text-sm font-medium tracking-wide hover:text-white transition-colors uppercase",href:"#",children:"Contacto"})]}),o.jsx("div",{className:"flex items-center",children:o.jsx("button",{className:"bg-white/10 backdrop-blur-md border border-white/20 text-white px-6 py-2 rounded-full text-sm font-semibold hover:bg-white hover:text-forest transition-all",children:"Ingresar"})})]}):o.jsx("header",{className:"bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-[#e4e3dc]/50 dark:border-white/10 sticky top-0 z-50",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-20 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:o.jsx("svg",{className:"size-6",fill:"currentColor",viewBox:"0 0 48 48",children:o.jsx("path",{clipRule:"evenodd",d:"M24 4H6V17.3333V30.6667H24V44H42V30.6667V17.3333H24V4Z",fillRule:"evenodd"})})}),o.jsx("span",{className:"text-xl font-bold tracking-tight text-[#171612] dark:text-white",children:"RegalosQueCantan"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-10",children:[o.jsx("a",{className:"text-sm font-medium text-[#857d66] dark:text-gray-400 hover:text-primary transition-colors",href:"#",children:"Proceso"}),o.jsx("a",{className:"text-sm font-medium text-[#857d66] dark:text-gray-400 hover:text-primary transition-colors",href:"#",children:"Precios"}),o.jsx("a",{className:"text-sm font-medium text-[#857d66] dark:text-gray-400 hover:text-primary transition-colors",href:"#",children:"Ayuda"}),o.jsx("div",{className:"h-10 w-10 rounded-full border-2 border-primary/20 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-primary/60",children:"person"})})]})]})})}const kp=["/images/genres/corrido.png","/images/genres/nortena.png","/images/genres/banda.png","/images/genres/cumbia.png","/images/genres/mariachi.png","/images/genres/tamborazo.png","/images/occasions/cumpleanos.png","/images/occasions/aniversario.png","/images/occasions/quinceanera.png","/images/occasions/graduacion.png","/images/reactions/reaction1.jpg","/images/reactions/reaction2.jpg","/images/reactions/reaction3.jpg","/images/reactions/reaction4.jpg","/images/reactions/reaction5.png","/images/reactions/reaction6.jpg","/images/reactions/reaction7.jpg","/images/reactions/reaction8.jpg","/images/reactions/reaction9.jpg"],jp=t=>{const e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e};function Sp(){const{navigateTo:t}=T.useContext(Ce),e=T.useRef(null),[r]=bi.useState(()=>jp(kp)),n=[...r,...r];return T.useEffect(()=>{const s=e.current;if(!s)return;let i,a=0;const l=.5,u=()=>{a+=l;const m=s.scrollWidth/2;a>=m&&(a=0),s.scrollLeft=a,i=requestAnimationFrame(u)};i=requestAnimationFrame(u);const c=()=>cancelAnimationFrame(i),d=()=>{i=requestAnimationFrame(u)};return s.addEventListener("mouseenter",c),s.addEventListener("mouseleave",d),()=>{cancelAnimationFrame(i),s.removeEventListener("mouseenter",c),s.removeEventListener("mouseleave",d)}},[]),o.jsxs("div",{className:"min-h-screen bg-background-dark flex flex-col",children:[o.jsx(ut,{variant:"landing"}),o.jsxs("section",{className:"relative flex-1 flex flex-col items-center justify-center overflow-hidden py-16 md:py-24",children:[o.jsxs("div",{className:"absolute inset-0 w-full h-full bg-forest",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center mix-blend-overlay opacity-40",style:{backgroundImage:'url("https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=1920")'}}),o.jsx("div",{className:"hero-gradient absolute inset-0 z-10"}),o.jsx("div",{className:"papel-picado-overlay absolute inset-0 z-10 text-white"})]}),o.jsxs("div",{className:"relative z-20 container mx-auto px-6 text-center flex flex-col items-center gap-6 max-w-5xl",children:[o.jsx("span",{className:"text-gold uppercase tracking-[0.3em] text-xs font-bold bg-gold/10 px-4 py-2 rounded-full border border-gold/20",children:"Canciones Personalizadas con IA"}),o.jsxs("h1",{className:"text-white text-5xl md:text-7xl lg:text-8xl font-black leading-none tracking-tighter font-display",children:["Tu Historia, ",o.jsx("br",{}),o.jsx("span",{className:"italic text-transparent bg-clip-text bg-gradient-to-r from-gold via-white to-gold",children:"Tu Cancin"})]}),o.jsx("p",{className:"text-white/70 text-lg md:text-xl font-light leading-relaxed max-w-2xl mx-auto",children:"Crea una cancin nica para alguien especial en minutos."}),o.jsxs("button",{onClick:()=>t("genre"),className:"group relative flex min-w-[280px] md:min-w-[340px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-16 px-10 bg-bougainvillea text-white text-lg font-bold shadow-2xl shadow-bougainvillea/30 transition-all hover:scale-105 active:scale-95 mt-4",children:[o.jsx("span",{className:"material-symbols-outlined mr-2",children:"music_note"}),o.jsx("span",{className:"relative z-10",children:"Crear Mi Cancin"}),o.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"})]}),o.jsx("p",{className:"text-white/40 text-sm",children:"Preview gratis  Paga solo si te encanta"})]})]}),o.jsx("section",{className:"py-8 overflow-hidden bg-background-dark/50",children:o.jsx("div",{ref:e,className:"flex gap-4 overflow-x-hidden cursor-grab active:cursor-grabbing",style:{scrollBehavior:"auto"},children:n.map((s,i)=>o.jsx("div",{onClick:()=>t("genre"),className:"flex-shrink-0 w-48 h-48 md:w-64 md:h-64 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl hover:shadow-primary/20 transition-all hover:scale-105 cursor-pointer group",children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("img",{src:s,alt:"",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-xl transform scale-75 group-hover:scale-100 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-forest text-2xl",style:{fontVariationSettings:"'FILL' 1"},children:"play_arrow"})})})]})},i))})}),o.jsx("footer",{className:"py-6 px-6 text-center bg-background-dark",children:o.jsx("p",{className:"text-white/20 text-xs",children:" 2025 RegalosQueCantan  Hecho con "})})]})}const Mu=[{id:1,name:"Gnero",page:"genre"},{id:2,name:"Ocasin",page:"occasion"},{id:3,name:"Nombres",page:"names"},{id:4,name:"Historia",page:"details"},{id:5,name:"Confirmar",page:"email"}];function on({step:t,totalSteps:e=5,label:r=""}){const{navigateTo:n}=T.useContext(Ce),s=Math.round(t/e*100),i=a=>{a<=t&&n(Mu[a-1].page)};return o.jsxs("div",{className:"w-full max-w-[640px] mb-8",children:[o.jsxs("div",{className:"flex justify-between items-end mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] font-bold tracking-[0.2em] uppercase text-primary mb-1 block",children:"Creacin de Cancin"}),o.jsxs("h3",{className:"text-sm font-semibold text-[#171612] dark:text-white",children:["Paso ",t," de ",e]})]}),o.jsxs("p",{className:"text-sm font-medium text-[#857d66] dark:text-gray-400",children:[s,"% completado"]})]}),o.jsx("div",{className:"h-1.5 w-full bg-[#e4e3dc] dark:bg-white/10 rounded-full overflow-hidden mb-4",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-700 ease-out",style:{width:`${s}%`}})}),o.jsx("div",{className:"flex justify-between items-center",children:Mu.map(a=>o.jsxs("button",{onClick:()=>i(a.id),disabled:a.id>t,className:`flex flex-col items-center gap-1 transition-all ${a.id<=t?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-40"}`,title:a.id<=t?`Ir a ${a.name}`:"Completa los pasos anteriores",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${a.id<t?"bg-primary text-white":a.id===t?"bg-primary text-white ring-4 ring-primary/20":"bg-gray-200 dark:bg-gray-700 text-gray-400"}`,children:a.id<t?o.jsx("span",{className:"material-symbols-outlined text-lg",style:{fontVariationSettings:"'FILL' 1"},children:"check"}):a.id}),o.jsx("span",{className:`text-[10px] font-medium hidden sm:block ${a.id<=t?"text-primary":"text-gray-400"}`,children:a.name})]},a.id))}),r&&o.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 italic text-center",children:r})]})}function Ui(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Np(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{c(n.next(d))}catch(m){a(m)}}function u(d){try{c(n.throw(d))}catch(m){a(m)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})}const Ep=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class bl extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Tp extends bl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fu extends bl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bu extends bl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var po;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(po||(po={}));class Cp{constructor(e,{headers:r={},customFetch:n,region:s=po.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Ep(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Np(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:l,method:u,body:c,signal:d,timeout:m}=n;let f={},{region:y}=n;y||(y=this.region);const v=new URL(`${this.url}/${r}`);y&&y!=="any"&&(f["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let w;c&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(f["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(f["Content-Type"]="application/json",w=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?w=JSON.stringify(c):w=c;let b=d;m&&(a=new AbortController,i=setTimeout(()=>a.abort(),m),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const p=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:w,signal:b}).catch(j=>{throw new Tp(j)}),h=p.headers.get("x-relay-error");if(h&&h==="true")throw new Fu(p);if(!p.ok)throw new Bu(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield p.json():g==="application/octet-stream"||g==="application/pdf"?x=yield p.blob():g==="text/event-stream"?x=p:g==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(l){return{data:null,error:l,response:l instanceof Bu||l instanceof Fu?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Op=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Rp=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,u=null,c=i.status,d=i.statusText;if(i.ok){var m,f;if(r.method!=="HEAD"){var y;const p=await i.text();p===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?l=p:l=JSON.parse(p))}const w=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),b=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&b&&b.length>1&&(u=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,c=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const w=await i.text();try{a=JSON.parse(w),Array.isArray(a)&&i.status===404&&(l=[],a=null,c=200,d="OK")}catch{i.status===404&&w===""?(c=204,d="No Content"):a={message:w}}if(a&&r.isMaybeSingle&&(!(a==null||(v=a.details)===null||v===void 0)&&v.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&r.shouldThrowOnError)throw new Op(a)}return{error:a,data:l,count:u,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="";const u=i==null?void 0:i.cause;if(u){var c,d,m,f;const v=(c=u==null?void 0:u.message)!==null&&c!==void 0?c:"",w=(d=u==null?void 0:u.code)!==null&&d!==void 0?d:"";l=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"Error"}: ${v}`,w&&(l+=` (${w})`),u!=null&&u.stack&&(l+=`
${u.stack}`)}else{var y;l=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},Pp=class extends Rp{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Vu=new RegExp("[,()]");var Er=class extends Pp{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Vu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Vu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},Ap=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:l,headers:u}=this.cloneRequestState();return l.searchParams.set("select",a),n&&u.append("Prefer",`count=${n}`),new Er({method:s,url:l,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),r||a.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);i.searchParams.set("columns",u.join(","))}}return new Er({method:s,url:i,headers:a,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST",{url:l,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),n&&u.append("Prefer",`count=${n}`),s||u.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(c.length>0){const d=[...new Set(c)].map(m=>`"${m}"`);l.searchParams.set("columns",d.join(","))}}return new Er({method:a,url:l,headers:u,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Er({method:n,url:s,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Er({method:r,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Ip=class Sh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ap(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;const d=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(d)),m=n&&Object.values(r).some(d);m?(l="POST",c=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{u.searchParams.append(y,v)})):(l="POST",c=r);const f=new Headers(this.headers);return m?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Er({method:l,url:u,headers:f,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class $p{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Lp="2.91.0",Up=`realtime-js/${Lp}`,Dp="1.0.0",Nh="2.0.0",Wu=Nh,go=1e4,zp=1e3,Mp=100;var Tt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Tt||(Tt={}));var se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(se||(se={}));var Ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ze||(Ze={}));var yo;(function(t){t.websocket="websocket"})(yo||(yo={}));var rr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rr||(rr={}));class Fp{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var s,i;const a=e.topic,l=(s=e.ref)!==null&&s!==void 0?s:"",u=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(d).length===0?"":JSON.stringify(d);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+a.length+c.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(y),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,u.length),v.setUint8(w++,l.length),v.setUint8(w++,a.length),v.setUint8(w++,c.length),v.setUint8(w++,m.length),v.setUint8(w++,r),Array.from(u,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(l,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(a,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(c,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(m,p=>v.setUint8(w++,p.charCodeAt(0)));var b=new Uint8Array(y.byteLength+n.byteLength);return b.set(new Uint8Array(y),0),b.set(new Uint8Array(n),y.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,a,l,u]=n;return r({join_ref:s,ref:i,topic:a,event:l,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const c=n.decode(e.slice(u,u+s));u=u+s;const d=n.decode(e.slice(u,u+i));u=u+i;const m=n.decode(e.slice(u,u+a));u=u+a;const f=e.slice(u,e.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:y};return a>0&&(v.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Eh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(V||(V={}));const qu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=Bp(a,t,e,s),i),{}):{}},Bp=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Th(i,a):vo(a)},Th=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Hp(e,r)}switch(t){case V.bool:return Vp(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return Wp(e);case V.json:case V.jsonb:return qp(e);case V.timestamp:return Kp(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return vo(e);default:return vo(e)}},vo=t=>t,Vp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Wp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},qp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Hp=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Th(e,l))}return t},Kp=t=>typeof t=="string"?t.replace(" ","T"):t,Ch=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ha{constructor(e,r,n={},s=go){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Hu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Hu||(Hu={}));class An{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=An.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=An.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=An.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{a[c]||(u[c]=d)}),this.map(a,(c,d)=>{const m=i[c];if(m){const f=d.map(b=>b.presence_ref),y=m.map(b=>b.presence_ref),v=d.filter(b=>y.indexOf(b.presence_ref)<0),w=m.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(l[c]=v),w.length>0&&(u[c]=w)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const m=e[l].map(y=>y.presence_ref),f=d.filter(y=>m.indexOf(y.presence_ref)<0);e[l].unshift(...f)}n(l,d,u)}),this.map(a,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(m=>m.presence_ref);c=c.filter(m=>d.indexOf(m.presence_ref)<0),e[l]=c,s(l,c,u),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ku;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ku||(Ku={}));var In;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(In||(In={}));var ht;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ht||(ht={}));class Br{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ha(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new Eh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new An(this),this.broadcastEndpointURL=Ch(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[In.PRESENCE]&&this.bindings[In.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(ht.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(ht.CLOSED)),this.updateJoinPayload(Object.assign({config:f},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(ht.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,p=[];for(let h=0;h<b;h++){const g=w[h],{filter:{event:x,schema:j,table:k,filter:_}}=g,E=y&&y[h];if(E&&E.event===x&&Br.isFilterValueEqual(E.schema,j)&&Br.isFilterValueEqual(E.table,k)&&Br.isFilterValueEqual(E.filter,_))p.push(Object.assign(Object.assign({},g),{id:E.id}));else{this.unsubscribe(),this.state=se.errored,e==null||e(ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ht.SUBSCRIBED);return}}).receive("error",y=>{this.state=se.errored,e==null||e(ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===se.joined&&e===In.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const c=await l.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,u;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ha(this,Ze.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ha(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Mp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ze;if(n&&[l,u,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,b;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=y.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(y=>y.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(y=>{var v,w,b,p,h,g,x,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const k=y.id,_=(v=y.filter)===null||v===void 0?void 0:v.event;return k&&((w=r.ids)===null||w===void 0?void 0:w.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((p=y.filter)===null||p===void 0)&&p.table)||y.filter.table===((h=r.data)===null||h===void 0?void 0:h.table))}else{const k=(x=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return k==="*"||k===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:b,commit_timestamp:p,type:h,errors:g}=v;f=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:p,eventType:h,new:{},old:{},errors:g}),this._getPayloadRecords(v))}y.callback(f,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Br.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=qu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=qu(e.columns,e.old_record)),r}}const fa=()=>{},Os={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gp=[1e3,2e3,5e3,1e4],Jp=1e4,Qp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Yp{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=go,this.transport=null,this.heartbeatIntervalMs=Os.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fa,this.ref=0,this.reconnectTimer=null,this.vsn=Wu,this.logger=fa,this.conn=null,this.sendBuffer=[],this.serializer=new Fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${yo.websocket}`,this.httpEndpoint=Ch(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$p.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return rr.Connecting;case Tt.open:return rr.Open;case Tt.closing:return rr.Closing;default:return rr.Closed}}isConnected(){return this.connectionState()===rr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Br(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Os.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Tt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tt.open||this.conn.readyState===Tt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Qp],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:Up};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ze.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Eh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Os.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,l,u,c,d,m,f,y;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:go,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Os.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:fa,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:Wu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>Gp[v-1]||Jp,this.vsn){case Dp:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(v,w)=>w(JSON.stringify(v)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:(v,w)=>w(JSON.parse(v));break;case Nh:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Xn=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Xp(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function Zp(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function eg(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const l=Xp(t.baseUrl,n,s),u=await Zp(t.auth),c=await e(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...a},body:i?JSON.stringify(i):void 0}),d=await c.text(),m=(c.headers.get("content-type")||"").includes("application/json"),f=m&&d?JSON.parse(d):d;if(!c.ok){const y=m?f:void 0,v=y==null?void 0:y.error;throw new Xn((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:y})}return{status:c.status,headers:c.headers,data:f}}}}function Rs(t){return t.join("")}var tg=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Rs(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rs(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rs(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rs(t.namespace)}`}),!0}catch(e){if(e instanceof Xn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Xn&&r.status===409)return;throw r}}};function br(t){return t.join("")}var rg=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${br(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Xn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Xn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},ng=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=eg({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new tg(this.client,e),this.tableOps=new rg(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Di=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function G(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var sg=class extends Di{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xo=class extends Di{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const _l=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ig=()=>Response,wo=t=>{if(Array.isArray(t))return t.map(r=>wo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wo(n)}),e},ag=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},og=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Zn(t){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(t)}function lg(t,e){if(Zn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ug(t){var e=lg(t,"string");return Zn(e)=="symbol"?e:e+""}function cg(t,e,r){return(e=ug(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gu(Object(r),!0).forEach(function(n){cg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gu(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const ma=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dg=async(t,e,r)=>{t instanceof await ig()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,i=(n==null?void 0:n.statusCode)||s+"";e(new sg(ma(n),s,i))}).catch(n=>{e(new xo(ma(n),n))}):e(new xo(ma(t),t))},hg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(ag(n)?(s.headers=A({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),A(A({},s),r))};async function us(t,e,r,n,s,i){return new Promise((a,l)=>{t(r,hg(e,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>dg(u,l,n))})}async function es(t,e,r,n){return us(t,"GET",e,r,n)}async function Ye(t,e,r,n,s){return us(t,"POST",e,n,s,r)}async function bo(t,e,r,n,s){return us(t,"PUT",e,n,s,r)}async function fg(t,e,r,n){return us(t,"HEAD",e,A(A({},r),{},{noResolveJson:!0}),n)}async function kl(t,e,r,n,s){return us(t,"DELETE",e,n,s,r)}var mg=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}}};let Oh;Oh=Symbol.toStringTag;var pg=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Oh]="BlobDownloadBuilder",this.promise=null}asStream(){return new mg(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}}};const gg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ju={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var yg=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=_l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let i;const a=A(A({},Ju),n);let l=A(A({},s.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,u&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(l=A(A({},l),n.headers));const c=s._removeEmptyFolders(e),d=s._getFinalPath(c),m=await(t=="PUT"?bo:Ye)(s.fetch,`${s.url}/object/${d}`,i,A({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(G(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const i=s._removeEmptyFolders(t),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);l.searchParams.set("token",e);try{let u;const c=A({upsert:Ju.upsert},n),d=A(A({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:i,fullPath:(await bo(s.fetch,l.toString(),u,{headers:d})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(G(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=A({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Ye(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),l=a.searchParams.get("token");if(!l)throw new Di("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Ye(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(G(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await Ye(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(G(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),i=await Ye(n.fetch,`${n.url}/object/sign/${s}`,A({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(G(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await Ye(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>A(A({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(G(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(t),a=()=>es(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new pg(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:wo(await es(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await fg(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(G(n)&&n instanceof xo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&n.push(a);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(t){var e=this;try{return{data:await kl(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=A(A(A({},gg),e),{},{prefix:t||""});return{data:await Ye(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(G(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=A({},t);return{data:await Ye(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Rh="2.91.0",Ph={"X-Client-Info":`storage-js/${Rh}`};var vg=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=A(A({},Ph),e),this.fetch=_l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await es(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await es(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Ye(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await bo(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Ye(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await kl(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},xg=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=A(A({},Ph),e),this.fetch=_l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ye(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await es(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await kl(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(G(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!og(t))throw new Di("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ng({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const jl={"X-Client-Info":`storage-js/${Rh}`,"Content-Type":"application/json"};var Ah=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ie(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var pa=class extends Ah{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wg=class extends Ah{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Sl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_g=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";e(new pa(Qu(i),n,a))}).catch(()=>{const i=n+"";e(new pa(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";e(new pa(s.statusText||`HTTP ${n} error`,n,i))}}else e(new wg(Qu(t),t))},kg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(bg(n)?(s.headers=A({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,A(A({},s),r)):s};async function jg(t,e,r,n,s,i){return new Promise((a,l)=>{t(r,kg(e,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const c=u.headers.get("content-type");return!c||!c.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>_g(u,l,n))})}async function $e(t,e,r,n,s){return jg(t,"POST",e,n,s,r)}var Sg=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=A(A({},jl),e),this.fetch=Sl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await $e(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await $e(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}},Ng=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=A(A({},jl),e),this.fetch=Sl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $e(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await $e(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $e(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}},Eg=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=A(A({},jl),e),this.fetch=Sl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await $e(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await $e(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}},Tg=class extends Eg{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Cg(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Cg=class extends Sg{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new Og(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Og=class extends Ng{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,A(A({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Rg=class extends vg{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new yg(this.url,this.headers,t,this.fetch)}get vectors(){return new Tg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xg(this.url+"/iceberg",this.headers,this.fetch)}};const Ih="2.91.0",Tr=30*1e3,_o=3,ga=_o*Tr,Pg="http://localhost:9999",Ag="supabase.auth.token",Ig={"X-Client-Info":`gotrue-js/${Ih}`},ko="X-Supabase-Api-Version",$h={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$g=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lg=10*60*1e3;class ts extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function R(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ug extends ts{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Dg(t){return R(t)&&t.name==="AuthApiError"}class nr extends ts{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class _t extends ts{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Pe extends _t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zg(t){return R(t)&&t.name==="AuthSessionMissingError"}class _r extends _t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ps extends _t{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class As extends _t{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mg(t){return R(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yu extends _t{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fg extends _t{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jo extends _t{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ya(t){return R(t)&&t.name==="AuthRetryableFetchError"}class Xu extends _t{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class So extends _t{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zu=` 	
\r=`.split(""),Bg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Zu.length;e+=1)t[Zu[e].charCodeAt(0)]=-2;for(let e=0;e<yi.length;e+=1)t[yi[e].charCodeAt(0)]=e;return t})();function ec(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(yi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(yi[n]),e.queuedBits-=6}}function Lh(t,e,r){const n=Bg[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function tc(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{qg(a,n,r)};for(let a=0;a<t.length;a+=1)Lh(t.charCodeAt(a),s,i);return e.join("")}function Vg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Wg(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Vg(n,e)}}function qg(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Jr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Lh(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Hg(t){const e=[];return Wg(t,r=>e.push(r)),new Uint8Array(e)}function or(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>ec(s,r,n)),ec(null,r,n),e.join("")}function Kg(t){return Math.round(Date.now()/1e3)+t}function Gg(){return Symbol("auth-callback")}const ce=()=>typeof window<"u"&&typeof document<"u",Qt={tested:!1,writable:!1},Uh=()=>{if(!ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qt.tested)return Qt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qt.tested=!0,Qt.writable=!0}catch{Qt.tested=!0,Qt.writable=!1}return Qt.writable};function Jg(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Dh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Cr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Yt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ue=async(t,e)=>{await t.removeItem(e)};class zi{constructor(){this.promise=new zi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}zi.promiseConstructor=Promise;function va(t){const e=t.split(".");if(e.length!==3)throw new So("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!$g.test(e[n]))throw new So("JWT not in base64url format");return{header:JSON.parse(tc(e[0])),payload:JSON.parse(tc(e[1])),signature:Jr(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Xg(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function Zg(t){return("0"+t.toString(16)).substr(-2)}function ey(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Zg).join("")}async function ty(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ry(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ty(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(t,e,r=!1){const n=ey();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Cr(t,`${e}-code-verifier`,s);const i=await ry(n);return[i,n===i?"plain":"s256"]}const ny=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sy(t){const e=t.headers.get(ko);if(!e||!e.match(ny))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ay(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jr(t){if(!oy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xa(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ly(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function rc(t){return JSON.parse(JSON.stringify(t))}const er=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uy=[502,503,504];async function nc(t){var e;if(!Qg(t))throw new jo(er(t),0);if(uy.includes(t.status))throw new jo(er(t),t.status);let r;try{r=await t.json()}catch(i){throw new nr(er(i),i)}let n;const s=sy(t);if(s&&s.getTime()>=$h["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Xu(er(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Xu(er(r),t.status,r.weak_password.reasons);throw new Ug(er(r),t.status||500,n)}const cy=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function P(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ko]||(i[ko]=$h["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await dy(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function dy(t,e,r,n,s,i){const a=cy(e,n,s,i);let l;try{l=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new jo(er(u),0)}if(l.ok||await nc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await nc(u)}}function Je(t){var e;let r=null;my(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Kg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function sc(t){const e=Je(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hy(t){return{data:t,error:null}}function fy(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=Ui(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:l,user:u},error:null}}function ic(t){return t}function my(t){return t.access_token&&t.refresh_token&&t.expires_in}const wa=["global","local","others"];class py{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Dh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=wa[0]){if(wa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wa.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Ui(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fy,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(R(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rt})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ic});if(d.error)throw d.error;const m=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(R(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){jr(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rt})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){jr(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){jr(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){jr(e.userId);try{const{data:r,error:n}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _deleteFactor(e){jr(e.userId),jr(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ic});if(d.error)throw d.error;const m=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(R(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}}function ac(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Sr={debug:!!(globalThis&&Uh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gy extends zh{}async function yy(t,e,r){Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new gy(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function vy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Mh(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function xy(t){return parseInt(t,16)}function wy(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function by(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:u,resources:c,scheme:d,uri:m,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=Mh(t.address),v=d?`${d}://${n}`:n,w=t.statement?`${t.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${y}

${w}`;let p=`URI: ${m}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),l&&(p+=`
Not Before: ${l.toISOString()}`),u&&(p+=`
Request ID: ${u}`),c){let h=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);h+=`
- ${g}`}p+=h}return`${b}
${p}`}class re extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class vi extends re{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function _y({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Fh(a)){if(i.rp.id!==a)return new re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function ky({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Fh(n)){if(r.rpId!==n)return new re({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class jy{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Sy=new jy;function Ny(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Ui(t,["challenge","user","excludeCredentials"]),i=Jr(e).buffer,a=Object.assign(Object.assign({},r),{id:Jr(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:Jr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function Ey(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Ui(t,["challenge","allowCredentials"]),s=Jr(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Jr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Ty(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:or(new Uint8Array(t.response.attestationObject)),clientDataJSON:or(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Cy(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:or(new Uint8Array(s.authenticatorData)),clientDataJSON:or(new Uint8Array(s.clientDataJSON)),signature:or(new Uint8Array(s.signature)),userHandle:s.userHandle?or(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fh(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function oc(){var t,e;return!!(ce()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Oy(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vi("Browser returned unexpected credential type",e)}:{data:null,error:new vi("Empty credential response",e)}}catch(e){return{data:null,error:_y({error:e,options:t})}}}async function Ry(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vi("Browser returned unexpected credential type",e)}:{data:null,error:new vi("Empty credential response",e)}}catch(e){return{data:null,error:ky({error:e,options:t})}}}const Py={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ay={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function xi(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const l=n[i];e(l)?n[i]=xi(l,a):n[i]=xi(a)}else n[i]=a}return n}function Iy(t,e){return xi(Py,t,e||{})}function $y(t,e){return xi(Ay,t,e||{})}class Ly{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:l};const u=s??Sy.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=Iy(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:m}=await Oy({publicKey:c,signal:u});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:m}}case"request":{const c=$y(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:m}=await Ry(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:m}}}}catch(a){return R(a)?{data:null,error:a}:{data:null,error:new nr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ts("rpId is required for WebAuthn authentication")};try{if(!oc())return{data:null,error:new nr("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return R(a)?{data:null,error:a}:{data:null,error:new nr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ts("rpId is required for WebAuthn registration")};try{if(!oc())return{data:null,error:new nr("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var m;return(m=d.data)===null||m===void 0?void 0:m.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:u,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(a){return R(a)?{data:null,error:a}:{data:null,error:new nr("Unexpected error in register",a)}}}}vy();const Uy={url:Pg,storageKey:Ag,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ig,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lc(t,e,r){return await r()}const Nr={};class rs{get jwks(){var e,r;return(r=(e=Nr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Nr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Uy),e);if(this.storageKey=i.storageKey,this.instanceID=(r=rs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,rs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ce()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new py({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Dh(i.fetch),this.lock=i.lock||lc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ce()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yy:this.lock=lc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ly(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Uh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ac(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ac(this.memoryStorage)),ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ih}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ce()&&(r=Jg(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ce()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Mg(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return R(r)?this._returnResult({error:r}):this._returnResult({error:new nr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Je}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:m,options:f}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await kr(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:m,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:v},xform:Je})}else if("phone"in e){const{phone:d,password:m,options:f}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Je})}else throw new Ps("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await ue(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sc})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sc})}else throw new Ps("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new _r;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,l,u,c,d,m,f;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:w,wallet:b,statement:p,options:h}=e;let g;if(ce())if(typeof b=="object")g=b;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")g=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=b}const x=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href),j=await g.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Mh(j[0]);let _=(n=h==null?void 0:h.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!_){const $=await g.request({method:"eth_chainId"});_=xy($)}const E={domain:x.host,address:k,statement:p,uri:x.href,version:"1",chainId:_,nonce:(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=h==null?void 0:h.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=h==null?void 0:h.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=h==null?void 0:h.signInWithEthereum)===null||d===void 0?void 0:d.resources};y=by(E),v=await g.request({method:"personal_sign",params:[wy(y),k]})}try{const{data:w,error:b}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Je});if(b)throw b;if(!w||!w.session||!w.user){const p=new _r;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(R(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,s,i,a,l,u,c,d,m,f,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:b,wallet:p,statement:h,options:g}=e;let x;if(ce())if(typeof p=="object")x=p;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))x=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=p}const j=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const k=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),h?{statement:h}:null));let _;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")_=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)_=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((m=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...g.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const k=await x.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:b,error:p}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:or(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Je});if(p)throw p;if(!b||!b.session||!b.user){const h=new _r;return this._returnResult({data:{user:null,session:null},error:h})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:p})}catch(b){if(R(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await Yt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Fg;const{data:i,error:a}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Je});if(await ue(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new _r;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,l=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Je}),{data:u,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u||!u.session||!u.user){const d=new _r;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:c})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await kr(this.storage,this.storageKey));const{error:m}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Ps("You must provide either an email or phone number.")}catch(l){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Je});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(s){if(R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,a;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await kr(this.storage,this.storageKey));const c=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:hy});return!((i=c.data)===null||i===void 0)&&i.url&&ce()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(l){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pe;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(R(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await P(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:l}=await P(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Ps("You must provide either an email or phone number and a type")}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Yt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ga:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Yt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=xa()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=ly(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rt}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pe}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(r){if(R(r))return zg(r)&&(await this._removeSession(),await ue(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Pe;const a=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await kr(this.storage,this.storageKey));const{data:c,error:d}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:a.access_token,xform:Rt});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pe;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=va(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(R(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pe;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ce())throw new As("No browser detected.");if(e.error||e.error_description||e.error_code)throw new As(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Yu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new As("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yu("No code detected.");const{data:h,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:u,token_type:c}=e;if(!i||!l||!a||!c)throw new As("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let f=d+m;u&&(f=parseInt(u));const y=f-d;y*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const v=f-m;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:f,refresh_token:a,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(n){if(R(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Yt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Dg(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await ue(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Gg(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await kr(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,u,c,d;const{data:m,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ce()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(R(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:u,access_token:c,nonce:d}=e,m=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Je}),{data:f,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new _r}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:y}))}catch(s){if(await ue(this.storage,`${this.storageKey}-code-verifier`),R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Xg(async s=>(s>0&&await Yg(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Je})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ya(i)&&Date.now()+a-n<Tr})}catch(n){if(this._debug(r,"error",n),R(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ce()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Yt(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Yt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Cr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:xa()}else if(s&&!s.user&&!s.user){const a=await Yt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ue(this.storage,this.storageKey+"-user"),await Cr(this.storage,this.storageKey,s)):s.user=xa()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ga;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ga}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ya(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new zi;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Pe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),R(i)){const a={data:null,error:i};return ya(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ue(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Cr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=rc(s);await Cr(this.storage,this.storageKey,i)}else{const s=rc(r);await Cr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ue(this.storage,this.storageKey),await ue(this.storage,this.storageKey+"-code-verifier"),await ue(this.storage,this.storageKey+"-user"),this.userStorage&&await ue(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Tr}ms, refresh threshold is ${_o} ticks`),s<=_o&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await kr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:c}=await P(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ty(e.webauthn.credential_response):Cy(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ny(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ey(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=va(n.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Pe})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Pe});const a=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&ce()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Pe});const a=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&ce()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await P(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Pe})})}catch(e){if(R(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await P(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pe})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Lg>s)return n;const{data:i,error:a}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});n=y.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:u}}=va(n);r!=null&&r.allowExpired||iy(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:a},error:null}}const d=ay(s.alg),m=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,a,Hg(`${l}.${u}`)))throw new So("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}}rs.nextInstanceID={};const Dy=rs,zy="2.91.0";let kn="";typeof Deno<"u"?kn="deno":typeof document<"u"?kn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kn="react-native":kn="node";const My={"X-Client-Info":`supabase-js-${kn}/${zy}`},Fy={headers:My},By={schema:"public"},Vy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wy={};function ns(t){"@babel/helpers - typeof";return ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ns(t)}function qy(t,e){if(ns(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ns(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hy(t){var e=qy(t,"string");return ns(e)=="symbol"?e:e+""}function Ky(t,e,r){return(e=Hy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uc(Object(r),!0).forEach(function(n){Ky(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Gy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jy=()=>Headers,Qy=(t,e,r)=>{const n=Gy(r),s=Jy();return async(i,a)=>{var l;const u=(l=await e())!==null&&l!==void 0?l:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,X(X({},a),{},{headers:c}))}};function Yy(t){return t.endsWith("/")?t:t+"/"}function Xy(t,e){var r,n;const{db:s,auth:i,realtime:a,global:l}=t,{db:u,auth:c,realtime:d,global:m}=e,f={db:X(X({},u),s),auth:X(X({},c),i),realtime:X(X({},d),a),storage:{},global:X(X(X({},m),l),{},{headers:X(X({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Zy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var e0=class extends Dy{constructor(t){super(t)}},t0=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const i=Zy(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:By,realtime:Wy,auth:X(X({},Vy),{},{storageKey:a}),global:Fy},u=Xy(r??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=u.auth)!==null&&c!==void 0?c:{},this.headers,u.global.fetch)}this.fetch=Qy(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(X({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Ip(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Rg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Cp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:l,debug:u,throwOnError:c},d,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e0({url:this.authUrl.href,headers:X(X({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:l,debug:u,throwOnError:c,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Yp(this.realtimeUrl.href,X(X({},t),{},{params:X(X({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const r0=(t,e,r)=>new t0(t,e,r);function n0(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}n0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pr="https://yzbvajungshqcpusfiia.supabase.co",ln="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl6YnZhanVuZ3NocWNwdXNmaWlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDM3MjAsImV4cCI6MjA4NDUxOTcyMH0.9cu9re38_Np3Q6xEcjGdEwctSiPAaaqo8W2c3HEx6k4",Bh=r0(pr,ln),Vh={corrido:"Mexican corrido, accordion, bajo sexto, brass, epic storytelling, norteo",norteno:"Norteo music, accordion, polka rhythm, traditional Mexican, bajo sexto",banda:"Mexican brass band, tubas, trumpets, tambora, powerful vocals, sinaloense",cumbia:"tropical cumbia, accordion, congas, danceable Latin beat, Colombian rhythm",ranchera:"mariachi, violins, trumpets, passionate vocals, traditional Mexican ranchera",balada:"romantic Spanish ballad, piano, strings, emotional vocals, Latin pop",reggaeton:"urban Latin, dembow beat, modern production, reggaetn perreo",salsa:"Caribbean salsa, piano montuno, congas, timbales, Cuban rhythm"},s0={cumpleanos:"una cancin de cumpleaos alegre y emotiva",aniversario:"una cancin romntica celebrando el amor y los aos juntos",declaracion:"una declaracin de amor apasionada y sincera",disculpa:"una cancin pidiendo perdn con el corazn",graduacion:"una cancin celebrando logros y nuevos comienzos",quinceanera:"una cancin especial para quinceaera, celebrando la transicin a la juventud",boda:"una cancin de amor para una boda, celebrando la unin",madre:"una cancin emotiva de agradecimiento para una madre",padre:"una cancin de admiracin y cario para un padre",amistad:"una cancin celebrando una amistad verdadera",motivacion:"una cancin motivacional e inspiradora",otro:"una cancin personalizada y emotiva"};async function i0(t){const e=`${pr}/functions/v1/generate-song`;console.log("=== generateSong API CALL ==="),console.log("URL:",e),console.log("SUPABASE_URL:",pr),console.log("Has ANON_KEY:",!0);const r={genre:t.genre,genreStyle:Vh[t.genre],occasion:t.occasion,occasionPrompt:s0[t.occasion],recipientName:t.recipientName,senderName:t.senderName,relationship:t.relationship,details:t.details,email:t.email,voiceType:t.voiceType||"male"};console.log("Payload:",r);const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ln}`},body:JSON.stringify(r)});if(console.log("Response status:",n.status),console.log("Response ok:",n.ok),!n.ok){const i=await n.text();throw console.error("Error response:",i),new Error(`Failed to generate song: ${n.status} - ${i}`)}const s=await n.json();return console.log("Response data:",s),s}async function a0(t,e,r=null){const n=await fetch(`${pr}/functions/v1/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ln}`},body:JSON.stringify({songId:t,email:e,couponCode:r})});if(!n.ok)throw new Error("Failed to create checkout");return n.json()}async function o0(t){const e=`${pr}/functions/v1/check-song-status`,r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ln}`},body:JSON.stringify({songId:t})});if(!r.ok){const n=await r.text();throw new Error(`Failed to check status: ${n}`)}return r.json()}async function l0(t){const e=`${pr}/functions/v1/regenerate-song`;console.log("=== regenerateSong API CALL ==="),console.log("Song ID:",t);const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ln}`},body:JSON.stringify({songId:t})});if(!r.ok){const n=await r.text();throw console.error("Regenerate error:",n),new Error(`Failed to regenerate song: ${r.status}`)}return r.json()}async function u0(t){const e=`${pr}/functions/v1/validate-coupon`,r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ln}`},body:JSON.stringify({code:t.toUpperCase().trim()})});if(!r.ok){const n=await r.text();throw new Error(n||"Cdigo invlido")}return r.json()}const c0=[{id:"corrido",name:"Corrido",emoji:"",desc:"Historias con garra"},{id:"norteno",name:"Norteo",emoji:"",desc:"El alma del acorden"},{id:"banda",name:"Banda",emoji:"",desc:"Fuerza y pasin"},{id:"cumbia",name:"Cumbia",emoji:"",desc:"Para bailar y celebrar"},{id:"ranchera",name:"Ranchera",emoji:"",desc:"Sentimiento mexicano"},{id:"balada",name:"Balada",emoji:"",desc:"Romance y suavidad"},{id:"reggaeton",name:"Reggaetn",emoji:"",desc:"Ritmo y energa"},{id:"salsa",name:"Salsa",emoji:"",desc:"Sabor y movimiento"}];function d0(){const{navigateTo:t,formData:e,updateFormData:r}=T.useContext(Ce),n=i=>{r("genre",i),r("genreStyle",Vh[i])},s=()=>{e.genre&&t("occasion")};return o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx(ut,{}),o.jsx("main",{className:"flex-1 flex flex-col items-center justify-center px-4 py-12",children:o.jsxs("div",{className:"w-full max-w-[960px]",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(on,{step:1})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[o.jsxs("div",{className:"text-center md:text-left flex-1",children:[o.jsx("h1",{className:"text-[#171612] dark:text-white text-3xl md:text-4xl font-bold tracking-tight mb-2",children:"Qu gnero musical prefieres?"}),o.jsx("p",{className:"text-[#857d66] dark:text-gray-400 text-lg",children:"Selecciona el estilo que mejor cuente tu historia."})]}),o.jsxs("button",{onClick:()=>t("landing"),className:"self-center md:self-auto flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white dark:bg-[#2a261a] border border-[#e4e3dc] dark:border-[#3a362a] text-[#171612] dark:text-white font-medium hover:shadow-md transition-all group",children:[o.jsx("span",{className:"material-symbols-outlined text-lg transition-transform group-hover:-translate-x-1",children:"arrow_back"}),o.jsx("span",{children:"Inicio"})]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-12",children:c0.map(i=>o.jsxs("div",{onClick:()=>n(i.id),className:`genre-card cursor-pointer group flex flex-col p-5 md:p-6 rounded-xl border-2 transition-all hover:-translate-y-1 ${e.genre===i.id?"border-primary bg-primary/5 dark:bg-primary/10 shadow-lg shadow-primary/20":"border-[#e4e3dc]/50 dark:border-white/5 bg-white dark:bg-background-dark/50 hover:border-primary/50"}`,children:[e.genre===i.id&&o.jsx("div",{className:"flex justify-end mb-1",children:o.jsx("span",{className:"material-symbols-outlined text-primary",style:{fontVariationSettings:"'FILL' 1"},children:"check_circle"})}),o.jsx("div",{className:`text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform ${e.genre!==i.id?"mt-6":""}`,children:i.emoji}),o.jsx("h3",{className:"text-base md:text-lg font-bold text-[#171612] dark:text-white mb-1",children:i.name}),o.jsx("p",{className:"text-xs md:text-sm text-[#857d66] dark:text-gray-400 leading-tight",children:i.desc})]},i.id))}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-background-dark border-t border-gray-200 dark:border-gray-800 p-4 md:hidden z-40",children:o.jsxs("button",{onClick:s,disabled:!e.genre,className:`w-full font-bold text-lg py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-3 ${e.genre?"bg-primary hover:bg-primary/90 text-white shadow-primary/20":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})}),o.jsx("div",{className:"hidden md:flex flex-col items-center gap-6",children:o.jsxs("button",{onClick:s,disabled:!e.genre,className:`min-w-[280px] font-bold text-lg py-4 px-8 rounded-xl shadow-lg transition-all flex items-center justify-center gap-3 ${e.genre?"bg-primary hover:bg-primary/90 text-white shadow-primary/20 hover:-translate-y-0.5":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})}),o.jsx("div",{className:"h-20 md:hidden"})]})})]})}const h0=[{id:"cumpleanos",name:"Cumpleaos",emoji:""},{id:"aniversario",name:"Aniversario",emoji:""},{id:"declaracion",name:"Declaracin de Amor",emoji:""},{id:"disculpa",name:"Pedir Perdn",emoji:""},{id:"graduacion",name:"Graduacin",emoji:""},{id:"quinceanera",name:"Quinceaera",emoji:""},{id:"boda",name:"Boda",emoji:""},{id:"madre",name:"Da de las Madres",emoji:""},{id:"padre",name:"Da del Padre",emoji:""},{id:"amistad",name:"Amistad",emoji:""},{id:"motivacion",name:"Motivacin",emoji:""},{id:"otro",name:"Otro",emoji:""}];function f0(){const{navigateTo:t,formData:e,updateFormData:r}=T.useContext(Ce),n=()=>{e.occasion&&t("names")};return o.jsxs("div",{className:"relative min-h-screen w-full flex flex-col overflow-x-hidden",children:[o.jsx("div",{className:"fixed inset-0 mexican-pattern pointer-events-none opacity-5"}),o.jsx(ut,{}),o.jsx("main",{className:"flex-1 flex justify-center py-8",children:o.jsxs("div",{className:"max-w-[1024px] w-full px-6 flex flex-col gap-8",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(on,{step:2})}),o.jsxs("div",{className:"text-center md:text-left mb-4",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black leading-tight tracking-[-0.03em] mb-2 text-[#171612] dark:text-white",children:"Cul es la ocasin?"}),o.jsx("p",{className:"text-[#857d66] dark:text-gray-400 text-lg",children:"Selecciona el motivo especial para tu cancin personalizada."})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:h0.map(s=>o.jsxs("div",{onClick:()=>r("occasion",s.id),className:`group relative flex flex-col items-center justify-center p-6 rounded-xl shadow-sm transition-all cursor-pointer ${e.occasion===s.id?"bg-primary/5 dark:bg-primary/10 border-2 border-primary shadow-md":"bg-white dark:bg-[#2a261a] border-2 border-transparent hover:border-primary/50 hover:shadow-xl"}`,children:[e.occasion===s.id&&o.jsx("div",{className:"absolute top-3 right-3 text-primary",children:o.jsx("span",{className:"material-symbols-outlined font-bold",children:"check_circle"})}),o.jsx("div",{className:`text-5xl mb-4 transition-transform ${e.occasion!==s.id?"group-hover:scale-110":""}`,children:s.emoji}),o.jsx("p",{className:"font-bold text-center text-[#171612] dark:text-white",children:s.name})]},s.id))}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-background-dark border-t border-gray-200 dark:border-gray-800 p-4 md:hidden z-40",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>t("genre"),className:"flex-1 py-3 rounded-xl border border-gray-200 dark:border-gray-700 font-medium text-gray-600 dark:text-gray-300 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),"Atrs"]}),o.jsxs("button",{onClick:n,disabled:!e.occasion,className:`flex-[2] py-3 rounded-xl font-bold flex items-center justify-center gap-2 ${e.occasion?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})}),o.jsxs("div",{className:"mt-8 hidden md:flex justify-between items-center pb-20",children:[o.jsxs("button",{onClick:()=>t("genre"),className:"group flex items-center gap-2 px-6 py-3 rounded-xl bg-white dark:bg-[#2a261a] border border-[#e4e3dc] dark:border-[#3a362a] text-[#171612] dark:text-white font-bold hover:shadow-md transition-all",children:[o.jsx("span",{className:"material-symbols-outlined transition-transform group-hover:-translate-x-1",children:"arrow_back"}),o.jsx("span",{children:"Volver"})]}),o.jsxs("button",{onClick:n,disabled:!e.occasion,className:`group flex min-w-[200px] items-center justify-center gap-3 overflow-hidden rounded-xl h-14 px-8 text-lg font-black leading-normal tracking-wide shadow-lg transition-all ${e.occasion?"bg-primary text-white shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-1":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[o.jsx("span",{children:"Continuar"}),o.jsx("span",{className:"material-symbols-outlined transition-transform group-hover:translate-x-1",children:"arrow_forward"})]})]}),o.jsx("div",{className:"h-24 md:hidden"})]})}),o.jsx("footer",{className:"w-full h-16 bg-white dark:bg-[#1a1710] border-t border-[#e4e3dc] dark:border-[#3a362a] flex items-center justify-center overflow-hidden",children:o.jsxs("div",{className:"flex gap-4 opacity-10",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"favorite"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"music_note"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"celebration"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"loyalty"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"volunteer_activism"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"music_note"}),o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"favorite"})]})})]})}const m0=[{id:"male",label:"Masculina",emoji:"",desc:"Cantante hombre"},{id:"female",label:"Femenina",emoji:"",desc:"Cantante mujer"}];function p0(){const{navigateTo:t,formData:e,updateFormData:r}=T.useContext(Ce),n=s=>{s.preventDefault(),e.recipientName&&e.senderName&&t("voice")};return o.jsxs("div",{className:"min-h-screen transition-colors duration-300",children:[o.jsx(ut,{}),o.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-6 md:p-12",children:[o.jsx("div",{className:"flex justify-center w-full",children:o.jsx(on,{step:3})}),o.jsxs("div",{className:"w-full max-w-[640px] bg-white dark:bg-[#2c3136] rounded-xl shadow-lg p-8 md:p-12 border border-[#f4f3f1] dark:border-white/5",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#171612] dark:text-white mb-4 tracking-tight",children:"A quin va dedicada?"}),o.jsx("p",{className:"text-[#857d66] dark:text-gray-400 text-lg",children:"As es como aparecern los nombres en la letra de tu cancin"})]}),o.jsxs("form",{onSubmit:n,className:"space-y-8",children:[o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block mb-2",children:o.jsxs("span",{className:"text-sm font-semibold text-[#171612] dark:text-gray-200",children:["Nombre del destinatario ",o.jsx("span",{className:"text-primary",children:"*"})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-primary/40 group-focus-within:text-primary",children:"person"}),o.jsx("input",{type:"text",value:e.recipientName,onChange:s=>r("recipientName",s.target.value),className:"w-full pl-12 pr-4 h-14 bg-[#fafafa] dark:bg-background-dark/50 border border-[#e4e3dc] dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all text-[#171612] dark:text-white placeholder:text-[#857d66]/50",placeholder:"Ej: Luca"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block mb-2",children:o.jsxs("span",{className:"text-sm font-semibold text-[#171612] dark:text-gray-200",children:["Tu nombre ",o.jsx("span",{className:"text-primary",children:"*"})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-primary/40 group-focus-within:text-primary",children:"pen_size_2"}),o.jsx("input",{type:"text",value:e.senderName,onChange:s=>r("senderName",s.target.value),className:"w-full pl-12 pr-4 h-14 bg-[#fafafa] dark:bg-background-dark/50 border border-[#e4e3dc] dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all text-[#171612] dark:text-white placeholder:text-[#857d66]/50",placeholder:"Ej: Marcos"})]})]}),o.jsxs("div",{className:"group",children:[o.jsxs("label",{className:"block mb-2 flex justify-between",children:[o.jsx("span",{className:"text-sm font-semibold text-[#171612] dark:text-gray-200",children:"Relacin"}),o.jsx("span",{className:"text-[10px] text-[#857d66] dark:text-gray-500 uppercase font-bold tracking-widest",children:"Opcional"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-primary/40 group-focus-within:text-primary",children:"favorite"}),o.jsx("input",{type:"text",value:e.relationship,onChange:s=>r("relationship",s.target.value),className:"w-full pl-12 pr-4 h-14 bg-[#fafafa] dark:bg-background-dark/50 border border-[#e4e3dc] dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all text-[#171612] dark:text-white placeholder:text-[#857d66]/50",placeholder:"Ej: Pareja, Madre, Amiga..."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block mb-3",children:o.jsx("span",{className:"text-sm font-semibold text-[#171612] dark:text-gray-200",children:" Tipo de voz"})}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:m0.map(s=>o.jsxs("button",{type:"button",onClick:()=>r("voiceType",s.id),className:`p-4 rounded-xl border-2 transition-all text-center ${(e.voiceType||"male")===s.id?"border-primary bg-primary/10 dark:bg-primary/20 ring-2 ring-primary/20":"border-[#e4e3dc] dark:border-white/10 hover:border-primary/50"}`,children:[o.jsx("span",{className:"text-3xl block mb-2",children:s.emoji}),o.jsx("span",{className:`font-bold block ${(e.voiceType||"male")===s.id?"text-primary":"text-[#171612] dark:text-white"}`,children:s.label}),o.jsx("span",{className:"text-xs text-[#857d66] dark:text-gray-400",children:s.desc})]},s.id))})]}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-background-dark border-t border-gray-200 dark:border-gray-800 p-4 md:hidden z-40",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"button",onClick:()=>t("occasion"),className:"flex-1 py-3 rounded-xl border border-gray-200 dark:border-gray-700 font-medium text-gray-600 dark:text-gray-300 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),"Atrs"]}),o.jsxs("button",{type:"submit",disabled:!e.recipientName||!e.senderName,className:`flex-[2] py-3 rounded-xl font-bold flex items-center justify-center gap-2 ${e.recipientName&&e.senderName?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})}),o.jsxs("div",{className:"pt-6 hidden md:flex flex-col md:flex-row gap-4",children:[o.jsxs("button",{type:"button",onClick:()=>t("occasion"),className:"order-2 md:order-1 flex-1 h-14 rounded-lg font-bold text-[#857d66] dark:text-gray-300 hover:bg-[#e4e3dc]/30 dark:hover:bg-white/5 transition-colors flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-xl",children:"arrow_back"}),"Atrs"]}),o.jsxs("button",{type:"submit",disabled:!e.recipientName||!e.senderName,className:`order-1 md:order-2 flex-[2] h-14 rounded-lg font-bold shadow-lg transition-all flex items-center justify-center gap-2 ${e.recipientName&&e.senderName?"bg-primary text-white shadow-primary/20 hover:brightness-110 active:scale-[0.98]":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]}),o.jsx("div",{className:"h-20 md:hidden"})]})]}),o.jsx("footer",{className:"mt-12 text-center text-[#857d66] dark:text-gray-500 text-sm max-w-md",children:o.jsx("p",{children:"Tu privacidad es importante. Solo usamos estos nombres para generar el contenido de tu pedido personalizado."})})]})]})}const g0=[{id:"female",name:"Voz Femenina",emoji:"",description:"Voz suave y emotiva",gradient:"from-pink-500 to-rose-500",bgGradient:"from-pink-500/20 to-rose-500/20"},{id:"male",name:"Voz Masculina",emoji:"",description:"Voz fuerte y profunda",gradient:"from-blue-500 to-indigo-500",bgGradient:"from-blue-500/20 to-indigo-500/20"},{id:"duet",name:"Dueto",emoji:"",description:"Voces masculina y femenina juntas",gradient:"from-purple-500 to-pink-500",bgGradient:"from-purple-500/20 to-pink-500/20"}];function y0(){const{navigateTo:t,formData:e,setFormData:r}=T.useContext(Ce),[n,s]=T.useState(e.voiceType||""),i=l=>{s(l)},a=()=>{n&&(r({...e,voiceType:n}),t("details"))};return o.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors",children:[o.jsx(ut,{}),o.jsxs("main",{className:"max-w-2xl mx-auto px-6 py-12",children:[o.jsx("div",{className:"flex justify-center w-full mb-8",children:o.jsx(on,{step:4,label:"Elige el tipo de voz"})}),o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-black text-[#171612] dark:text-white mb-3",children:"Qu tipo de voz prefieres?"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Elige la voz que mejor represente tu cancin"})]}),o.jsx("div",{className:"space-y-4 mb-10",children:g0.map(l=>o.jsxs("button",{onClick:()=>i(l.id),className:`w-full p-6 rounded-2xl border-2 transition-all duration-300 flex items-center gap-5 ${n===l.id?`border-primary bg-gradient-to-r ${l.bgGradient} shadow-lg scale-[1.02]`:"border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2c3136] hover:border-primary/50 hover:shadow-md"}`,children:[o.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${l.gradient} flex items-center justify-center text-3xl shadow-lg`,children:l.emoji}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("h3",{className:`text-xl font-bold ${n===l.id?"text-primary":"text-[#171612] dark:text-white"}`,children:l.name}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:l.description})]}),o.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all ${n===l.id?"border-primary bg-primary text-white":"border-gray-300 dark:border-gray-600"}`,children:n===l.id&&o.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"})})]},l.id))}),o.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-4 mb-8",children:o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.jsx("span",{className:"text-primary font-semibold",children:" Tip:"})," Para canciones romnticas, la voz del gnero opuesto al destinatario suele funcionar mejor. Por ejemplo, voz masculina para una mujer."]})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>t("names"),className:"flex-1 py-4 rounded-xl font-semibold border-2 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:" Atrs"}),o.jsxs("button",{onClick:a,disabled:!n,className:`flex-[2] py-4 rounded-xl font-semibold text-white transition-all flex items-center justify-center gap-2 ${n?"bg-primary hover:bg-primary-dark shadow-lg shadow-primary/30 hover:shadow-xl hover:scale-[1.02]":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]})]})}const v0=[{icon:"auto_awesome",label:"Recuerdos favoritos"},{icon:"person",label:"Cualidades"},{icon:"favorite",label:"Mensaje especial"}];function x0(){const{navigateTo:t,formData:e,updateFormData:r}=T.useContext(Ce),n=()=>{e.details.length>=20&&t("email")},s=i=>{const a=e.details?` ${i.toLowerCase()}`:i;r("details",e.details+a)};return o.jsxs("div",{className:"min-h-screen text-[#171612] dark:text-white transition-colors duration-300",children:[o.jsx(ut,{}),o.jsxs("main",{className:"max-w-3xl mx-auto px-6 py-12",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(on,{step:5,label:"Casi listo, solo faltan los toques personales..."})}),o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-4xl font-bold tracking-tight mb-4",children:"Cuntanos ms detalles"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-lg mx-auto",children:"Los mejores regalos son los que cuentan una historia real. Aydanos a escribir la letra perfecta."})]}),o.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-6",children:v0.map((i,a)=>o.jsxs("button",{onClick:()=>s(i.label),className:`flex items-center gap-2 px-5 py-2.5 rounded-full font-medium transition-all ${a===0?"bg-primary text-white shadow-lg shadow-primary/20 hover:scale-105":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:i.icon}),i.label]},i.label))}),o.jsxs("div",{className:"relative mb-8 group",children:[o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary/20 to-primary/5 rounded-2xl blur opacity-25 group-focus-within:opacity-100 transition duration-500"}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block mb-2 text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1",children:"Tu historia"}),o.jsx("textarea",{value:e.details,onChange:i=>r("details",i.target.value),className:"w-full min-h-[280px] p-6 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-lg leading-relaxed focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all placeholder:text-gray-400",placeholder:"Escribe sobre ese viaje especial, el momento en que se conocieron o lo que ms admiras de esa persona... No te preocupes por la rima, nosotros nos encargamos."}),o.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:[o.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${e.details.length>=20?"text-green-600 bg-green-100 dark:bg-green-900/30":"text-gray-400 bg-gray-100 dark:bg-gray-700"}`,children:[e.details.length," / 20 min"]}),o.jsx("span",{className:"material-symbols-outlined text-gray-300 text-lg",children:"edit_note"})]})]})]}),o.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-5 mb-12 flex gap-4 items-start",children:[o.jsx("div",{className:"bg-primary/20 p-2 rounded-lg text-primary",children:o.jsx("span",{className:"material-symbols-outlined block",children:"lightbulb"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-primary mb-1",children:"Un consejo para tu cancin"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"S especfico para mejores resultados. Los detalles pequeos como un apodo, una cancin que siempre cantan o un caf especfico hacen que la cancin sea nica."})]})]}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-background-dark border-t border-gray-200 dark:border-gray-800 p-4 md:hidden z-40",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>t("voice"),className:"flex-1 py-3 rounded-xl border border-gray-200 dark:border-gray-700 font-medium text-gray-600 dark:text-gray-300 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),"Atrs"]}),o.jsxs("button",{onClick:n,disabled:e.details.length<20,className:`flex-[2] py-3 rounded-xl font-bold flex items-center justify-center gap-2 ${e.details.length>=20?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})}),o.jsxs("div",{className:"hidden md:flex flex-col sm:flex-row items-center justify-between gap-6 border-t border-gray-200 dark:border-gray-700 pt-10",children:[o.jsxs("button",{onClick:()=>t("voice"),className:"flex items-center gap-2 text-gray-500 hover:text-gray-800 dark:hover:text-white font-medium transition-colors group",children:[o.jsx("span",{className:"material-symbols-outlined group-hover:-translate-x-1 transition-transform",children:"arrow_back"}),"Volver al paso anterior"]}),o.jsxs("button",{onClick:n,disabled:e.details.length<20,className:`w-full sm:w-auto px-10 py-4 font-bold rounded-xl shadow-xl transition-all flex items-center justify-center gap-2 ${e.details.length>=20?"bg-primary text-white shadow-primary/30 hover:bg-primary/90 hover:-translate-y-0.5":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Continuar",o.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]}),o.jsx("div",{className:"h-24 md:hidden"})]}),o.jsx("footer",{className:"max-w-5xl mx-auto px-6 py-12 text-center text-gray-400 text-xs",children:o.jsx("p",{children:" 2024 RegalosQueCantan. Hecho con amor y msica."})})]})}const w0={corrido:{name:"Corrido",emoji:""},norteno:{name:"Norteo",emoji:""},banda:{name:"Banda",emoji:""},cumbia:{name:"Cumbia",emoji:""},ranchera:{name:"Ranchera",emoji:""},balada:{name:"Balada",emoji:""},reggaeton:{name:"Reggaetn",emoji:""},salsa:{name:"Salsa",emoji:""}},b0={cumpleanos:{name:"Cumpleaos",emoji:""},aniversario:{name:"Aniversario",emoji:""},declaracion:{name:"Declaracin de Amor",emoji:""},disculpa:{name:"Pedir Perdn",emoji:""},graduacion:{name:"Graduacin",emoji:""},quinceanera:{name:"Quinceaera",emoji:""},boda:{name:"Boda",emoji:""},madre:{name:"Da de las Madres",emoji:""},padre:{name:"Da del Padre",emoji:""},amistad:{name:"Amistad",emoji:""},motivacion:{name:"Motivacin",emoji:""},otro:{name:"Otro",emoji:""}};function _0(){const{navigateTo:t,formData:e,updateFormData:r}=T.useContext(Ce),n=e.email&&e.email.includes("@")&&e.email.includes("."),s=l=>{l.preventDefault(),n&&t("generating")},i=w0[e.genre]||{name:"No seleccionado",emoji:""},a=b0[e.occasion]||{name:"No seleccionada",emoji:""};return o.jsxs("div",{className:"min-h-screen transition-colors duration-300",children:[o.jsx(ut,{}),o.jsxs("main",{className:"max-w-[640px] mx-auto px-4 py-8",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx(on,{step:6,label:"ltimo paso!"})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-[#171612] dark:text-white mb-3",children:"Casi listo!"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Ingresa tu correo para recibir tu cancin personalizada."})]}),o.jsxs("form",{onSubmit:s,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/60 dark:bg-[#1f251d]/60 backdrop-blur-xl rounded-2xl overflow-hidden shadow-2xl border border-gray-200/50 dark:border-primary/10",children:[o.jsxs("div",{className:"relative w-full h-32 bg-gradient-to-br from-forest via-forest-light to-primary/30 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent z-10"}),o.jsxs("div",{className:"absolute bottom-4 left-6 z-20",children:[o.jsx("span",{className:"bg-primary text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider",children:"Resumen del Pedido"}),o.jsx("h3",{className:"text-xl font-bold mt-2 text-white",children:"Tu Cancin Personalizada"})]})]}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"equalizer"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-wider",children:"Gnero"}),o.jsxs("p",{className:"font-bold text-sm text-[#171612] dark:text-white",children:[i.emoji," ",i.name]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"celebration"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-wider",children:"Ocasin"}),o.jsxs("p",{className:"font-bold text-sm text-[#171612] dark:text-white",children:[a.emoji," ",a.name]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-wider",children:"Para"}),o.jsx("p",{className:"font-bold text-sm text-[#171612] dark:text-white truncate",children:e.recipientName||"No especificado"})]})]})]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-bold px-1 text-gray-600 dark:text-gray-400",children:["Tu correo electrnico ",o.jsx("span",{className:"text-primary",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"mail"}),o.jsx("input",{type:"email",value:e.email,onChange:l=>r("email",l.target.value),className:"w-full bg-white dark:bg-[#1f251d] border-2 border-gray-200 dark:border-[#2d372a] focus:border-primary focus:ring-0 rounded-full py-4 pl-12 pr-6 text-lg transition-all outline-none text-[#171612] dark:text-white placeholder:text-gray-400",placeholder:"nombre@ejemplo.com"})]})]}),o.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-2xl p-5 flex gap-4 items-start",children:[o.jsx("div",{className:"bg-primary p-2 rounded-full text-white shrink-0",children:o.jsx("span",{className:"material-symbols-outlined text-lg block",children:"info"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-primary",children:"Qu sigue?"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:["Nuestra IA crear tu cancin en ~60 segundos. Primero escuchars un preview GRATIS, y si te gusta, la compras por solo ",o.jsx("strong",{children:"$19.99 USD"}),"."]})]})]}),o.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[o.jsxs("button",{type:"submit",disabled:!n,className:`w-full py-5 rounded-full font-extrabold text-xl shadow-xl transition-all flex items-center justify-center gap-3 group ${n?"bg-primary hover:bg-primary/90 text-white shadow-primary/30":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[o.jsx("span",{className:"material-symbols-outlined group-hover:scale-125 transition-transform",children:"mic"}),"CREAR MI CANCIN GRATIS"]}),o.jsxs("div",{className:"flex justify-between items-center px-2",children:[o.jsxs("button",{type:"button",onClick:()=>t("details"),className:"flex items-center gap-2 text-sm font-bold text-gray-500 hover:text-primary transition-colors uppercase tracking-tight",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),"Volver"]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[o.jsx("span",{className:"material-symbols-outlined text-xs",children:"lock"}),"Pago Seguro"]})]})]}),o.jsxs("p",{className:"text-center text-[11px] text-gray-500 px-8 leading-tight",children:['Al hacer clic en "Crear Mi Cancin", aceptas nuestros ',o.jsx("a",{className:"underline hover:text-primary",href:"#",children:"Trminos de Servicio"})," y ",o.jsx("a",{className:"underline hover:text-primary",href:"#",children:"Poltica de Privacidad"}),". No enviamos spam."]})]})]})]})}const cc=[{icon:"edit_note",label:" Escribiendo letra...",desc:"Claude AI est creando letras personalizadas"},{icon:"music_note",label:" Componiendo meloda...",desc:"Procesando arreglos musicales"},{icon:"mic",label:" Agregando voces...",desc:"Generando voces profesionales"},{icon:"graphic_eq",label:" Masterizando audio...",desc:"Aplicando efectos finales"}];function k0(){const{navigateTo:t,formData:e,setSongData:r}=T.useContext(Ce),[n,s]=T.useState(0),[i,a]=T.useState(0),[l,u]=T.useState(null),[c,d]=T.useState("Iniciando..."),m=T.useRef(!1),f=T.useRef(null);return T.useEffect(()=>{if(m.current)return;m.current=!0,console.log("=== GENERATING PAGE MOUNTED ===");const y=setInterval(()=>{a(b=>b>=95?b:b+.2)},500),v=setInterval(()=>{s(b=>Math.min(b+1,3))},45e3);return(async()=>{try{console.log("Starting song generation..."),d("Generando letras con IA...");const b=await i0(e);if(!b.success)throw new Error(b.error||"Failed to start generation");console.log("Generation started, songId:",b.songId),d("Componiendo msica..."),s(1),f.current=setInterval(async()=>{try{console.log("Checking song status...");const p=await o0(b.songId);if(console.log("Status:",p.status),p.status==="completed"&&p.song)console.log("Song completed!"),clearInterval(f.current),clearInterval(y),clearInterval(v),a(100),s(3),d("Cancin completada!"),r(p.song),setTimeout(()=>t("preview"),1500);else if(p.status==="failed")throw new Error("La generacin de msica fall")}catch(p){console.error("Poll error:",p)}},5e3)}catch(b){console.error("Generation error:",b),u(b.message),clearInterval(y),clearInterval(v),f.current&&clearInterval(f.current)}})(),()=>{clearInterval(y),clearInterval(v),f.current&&clearInterval(f.current)}},[]),o.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors duration-300",children:[o.jsx(ut,{}),o.jsx("main",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12 md:py-20",children:o.jsxs("div",{className:"max-w-[640px] w-full flex flex-col gap-10",children:[o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsxs("div",{className:"relative mb-8",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-3xl rounded-full scale-150"}),o.jsx("div",{className:"relative bg-white dark:bg-[#1e3a35] p-8 rounded-full shadow-xl border-4 border-primary/10",children:o.jsx("span",{className:"material-symbols-outlined text-primary text-7xl block animate-pulse",children:"spatial_audio_off"})})]}),o.jsx("h1",{className:"text-[#171612] dark:text-white text-[32px] md:text-[40px] font-extrabold leading-tight mb-2",children:l?"Algo sali mal!":"Creando tu cancin..."}),o.jsx("p",{className:"text-gray-500 dark:text-primary/70 text-lg font-medium",children:l?o.jsx("span",{className:"text-red-500",children:l}):o.jsxs(o.Fragment,{children:["Estamos transformando tus recuerdos en msica para ",o.jsx("span",{className:"text-primary font-bold",children:e.recipientName})]})})]}),l&&o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:()=>t("email"),className:"px-8 py-4 bg-primary text-white font-bold rounded-xl hover:bg-primary/90 transition-all",children:" Volver a intentar"})}),o.jsxs("div",{className:"bg-white dark:bg-[#152b27] rounded-xl p-6 md:p-8 shadow-sm border border-gray-200 dark:border-[#1e3a35]",children:[o.jsxs("div",{className:"flex flex-col gap-4 mb-10",children:[o.jsxs("div",{className:"flex gap-6 justify-between items-end",children:[o.jsx("p",{className:"text-[#171612] dark:text-white text-base font-bold leading-normal uppercase tracking-wider",children:"Estado de Generacin"}),o.jsxs("p",{className:"text-primary text-2xl font-extrabold leading-none",children:[Math.round(i),"%"]})]}),o.jsx("div",{className:"rounded-full bg-gray-200 dark:bg-[#1e3a35] h-3 overflow-hidden",children:o.jsx("div",{className:"h-full rounded-full bg-primary shadow-[0_0_12px_rgba(26,67,56,0.5)] transition-all duration-300",style:{width:`${i}%`}})})]}),o.jsx("div",{className:"grid grid-cols-[48px_1fr] gap-x-4",children:cc.map((y,v)=>{const w=v<n,b=v===n,p=v>n;return o.jsxs(bi.Fragment,{children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full shadow-lg transition-all ${w?"bg-primary text-white":b?"bg-white dark:bg-[#1e3a35] text-primary border-2 border-primary shadow-[0_0_15px_rgba(26,67,56,0.3)] animate-pulse":"bg-gray-100 dark:bg-[#0f231f] text-gray-400 border border-gray-200 dark:border-[#1e3a35]"}`,children:w?o.jsx("span",{className:"material-symbols-outlined text-xl",children:"check"}):b?o.jsx("span",{className:"material-symbols-outlined text-xl",children:"sync"}):o.jsx("span",{className:"material-symbols-outlined text-xl",children:"schedule"})}),v<cc.length-1&&o.jsx("div",{className:`w-[2px] h-12 ${w?"bg-primary":"bg-gray-200 dark:bg-[#1e3a35] border-l border-dashed"}`})]}),o.jsxs("div",{className:`flex flex-col pb-8 ${p?"opacity-60":""}`,children:[o.jsx("p",{className:"text-[#171612] dark:text-white text-lg font-bold",children:y.label}),o.jsx("p",{className:`text-sm font-medium ${w?"text-primary flex items-center gap-1":b?"text-gray-500 dark:text-primary/60":"text-gray-400 dark:text-primary/60"}`,children:w?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"verified"})," Finalizado"]}):b?y.desc+"...":"En espera"})]})]},y.label)})})]}),o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx("p",{className:"text-gray-500 dark:text-primary/60 text-sm font-medium max-w-[320px]",children:"La inteligencia artificial est trabajando para ti. Por favor, no cierres ni refresques esta ventana."}),o.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-[#1e3a35] px-4 py-2 rounded-full border border-gray-200 dark:border-[#1e3a35]",children:[o.jsx("span",{className:"material-symbols-outlined text-base text-primary",children:"timer"}),o.jsx("span",{className:"text-[#171612] dark:text-white text-xs font-bold uppercase tracking-widest",children:"Tiempo estimado: 2-3 min"})]})]})]})}),o.jsx("div",{className:"fixed bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/30 to-transparent"})]})}const tr=15,Hs=20,j0=tr+Hs,S0=10*60,N0={corrido:{name:"Corrido",emoji:"",color:"from-amber-500 to-orange-600"},norteno:{name:"Norteo",emoji:"",color:"from-green-500 to-emerald-600"},banda:{name:"Banda",emoji:"",color:"from-yellow-500 to-amber-600"},cumbia:{name:"Cumbia",emoji:"",color:"from-pink-500 to-rose-600"},ranchera:{name:"Ranchera",emoji:"",color:"from-red-500 to-rose-600"},balada:{name:"Balada",emoji:"",color:"from-purple-500 to-violet-600"},reggaeton:{name:"Reggaetn",emoji:"",color:"from-orange-500 to-red-600"},salsa:{name:"Salsa",emoji:"",color:"from-teal-500 to-cyan-600"}},E0={cumpleanos:"Cumpleaos",aniversario:"Aniversario",declaracion:"Declaracin de Amor",disculpa:"Pedir Perdn",graduacion:"Graduacin",quinceanera:"Quinceaera",boda:"Boda",madre:"Da de las Madres",padre:"Da del Padre",amistad:"Amistad",motivacion:"Motivacin",otro:"Otro"};function T0(){const{navigateTo:t,formData:e,setFormData:r,songData:n,setSongData:s,directSongId:i}=T.useContext(Ce),[a,l]=T.useState(!1),[u,c]=T.useState(0),[d,m]=T.useState(0),[f,y]=T.useState(!1),[v,w]=T.useState(!1),[b,p]=T.useState(null),[h,g]=T.useState(null),[x,j]=T.useState(!1),[k,_]=T.useState(S0),[E,$]=T.useState(!1),L=T.useRef(null),Oe=2,[_e,Kt]=T.useState(()=>{const C=sessionStorage.getItem(`regenerates_${n==null?void 0:n.id}`);return C!==null?parseInt(C):Oe}),[Gt,cs]=T.useState(!1),[kt,vr]=T.useState(""),[N,I]=T.useState(null),[U,B]=T.useState(""),[ee,Jt]=T.useState(!1),Re=29.99,jt=19.99;T.useEffect(()=>{(async()=>{if(i&&!n){w(!0),p(null);try{console.log("Loading song from database:",i);const{data:M,error:ct}=await Bh.from("songs").select("*").eq("id",i).single();if(ct){console.error("Error loading song:",ct),p("No se pudo encontrar la cancin");return}M&&(console.log("Song loaded:",M),s({id:M.id,previewUrl:M.preview_url||M.audio_url,audioUrl:M.audio_url,albumArt:M.album_art,lyrics:M.lyrics}),r(ds=>({...ds,genre:M.genre||"",occasion:M.occasion||"",recipientName:M.recipient_name||"",senderName:M.sender_name||"",voiceType:M.voice_type||"male"})))}catch(M){console.error("Error:",M),p("Error al cargar la cancin")}finally{w(!1)}}})()},[i,n,s,r]);const Fe=N0[e.genre]||{name:"Msica",emoji:"",color:"from-primary to-primary-dark"},xr=E0[e.occasion]||"Ocasin especial",un=(n==null?void 0:n.previewUrl)||(n==null?void 0:n.audioUrl)||(n==null?void 0:n.audio_url),Nl=(n==null?void 0:n.albumArt)||null;T.useEffect(()=>{if(k<=0){$(!0);return}const C=setInterval(()=>{_(M=>M<=1?($(!0),0):M-1)},1e3);return()=>clearInterval(C)},[k]);const El=C=>{const M=Math.floor(C/60),ct=C%60;return`${M.toString().padStart(2,"0")}:${ct.toString().padStart(2,"0")}`};T.useEffect(()=>{console.log("Song data:",n),console.log("Audio URL:",un)},[n,un]),T.useEffect(()=>{const C=L.current;if(!C)return;const M=()=>{const hs=C.currentTime,Ol=hs-tr;m(Math.max(0,Ol)),c(Math.max(0,Ol)/Hs*100),hs>=j0&&(C.pause(),C.currentTime=tr,l(!1),j(!0),c(100),m(Hs))},ct=()=>{l(!1),c(0),m(0)},ds=hs=>{console.error("Audio error:",hs),g("Error loading audio"),l(!1)},Cl=()=>{C.currentTime=tr};return C.addEventListener("timeupdate",M),C.addEventListener("ended",ct),C.addEventListener("error",ds),C.addEventListener("loadedmetadata",Cl),()=>{C.removeEventListener("timeupdate",M),C.removeEventListener("ended",ct),C.removeEventListener("error",ds),C.removeEventListener("loadedmetadata",Cl)}},[]);const Wh=()=>{const C=L.current;C&&(x&&(C.currentTime=tr,j(!1),c(0),m(0)),a?C.pause():(C.currentTime<tr&&(C.currentTime=tr),C.play().catch(M=>{console.error("Play error:",M),g("No se pudo reproducir el audio")})),l(!a))},Tl=C=>{if(!C||isNaN(C))return"0:00";const M=Math.floor(C/60),ct=Math.floor(C%60);return`${M}:${ct.toString().padStart(2,"0")}`},qh=async()=>{y(!0);try{const C=await a0(n==null?void 0:n.id,e.email,N==null?void 0:N.code);if(C.success&&C.url)window.location.href=C.url;else throw new Error(C.error||"Checkout failed")}catch(C){console.error("Checkout error:",C),alert("Error al procesar el pago. Por favor intenta de nuevo."),y(!1)}},Hh=async()=>{if(!(_e<=0||Gt)){cs(!0);try{const C=await l0(n==null?void 0:n.id);if(C.success&&C.song){s({id:C.song.id,previewUrl:C.song.preview_url||C.song.audio_url,audioUrl:C.song.audio_url,albumArt:C.song.album_art,lyrics:C.song.lyrics});const M=_e-1;Kt(M),sessionStorage.setItem(`regenerates_${C.song.id}`,M.toString()),c(0),m(0),j(!1),l(!1),t("generating")}else throw new Error(C.error||"Regeneration failed")}catch(C){console.error("Regenerate error:",C),alert("Error al regenerar la cancin. Por favor intenta de nuevo.")}finally{cs(!1)}}},Kh=async()=>{if(kt.trim()){Jt(!0),B("");try{const C=await u0(kt);C.valid?(I(C.coupon),B("")):(I(null),B(C.message||"Cdigo invlido"))}catch(C){console.error("Coupon error:",C),I(null),B("Cdigo invlido o expirado")}finally{Jt(!1)}}},Gh=()=>{I(null),vr(""),B("")},cn=(()=>{const C=E?Re:jt;return N?N.type==="free"||N.discount===100?0:N.type==="percentage"?Math.max(0,C*(1-N.discount/100)):N.type==="fixed"?Math.max(0,C-N.discount):C:C})();return o.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors",children:[o.jsx(ut,{}),o.jsxs("main",{className:"max-w-2xl mx-auto px-6 py-12",children:[v&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6",children:o.jsx("span",{className:"material-symbols-outlined text-4xl text-primary animate-spin",children:"progress_activity"})}),o.jsx("h2",{className:"text-2xl font-bold text-[#171612] dark:text-white mb-2",children:"Cargando tu cancin..."}),o.jsx("p",{className:"text-gray-500",children:"Un momento por favor"})]}),b&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full mb-6",children:o.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500",children:"error"})}),o.jsx("h2",{className:"text-2xl font-bold text-[#171612] dark:text-white mb-2",children:"No se encontr la cancin"}),o.jsx("p",{className:"text-gray-500 mb-6",children:b}),o.jsx("button",{onClick:()=>t("landing"),className:"px-6 py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary-dark transition-colors",children:"Crear una cancin nueva"})]}),!v&&!b&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-center mb-6",children:o.jsxs("span",{className:"inline-flex items-center gap-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-6 py-3 rounded-full font-semibold",children:[o.jsx("span",{className:"material-symbols-outlined",style:{fontVariationSettings:"'FILL' 1"},children:"check_circle"}),"Tu cancin est lista!"]})}),E?o.jsxs("div",{className:"mb-6 p-4 rounded-xl text-center bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600",children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:" La oferta especial ha expirado"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Precio actual: $29.99"})]}):o.jsxs("div",{className:`mb-6 p-4 rounded-xl text-center ${k<=60?"bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700":"bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-300 dark:border-amber-700"}`,children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("span",{className:`material-symbols-outlined text-2xl ${k<=60?"text-red-500 animate-pulse":"text-amber-600"}`,children:"timer"}),o.jsxs("div",{children:[o.jsx("p",{className:`text-sm font-medium ${k<=60?"text-red-600 dark:text-red-400":"text-amber-700 dark:text-amber-400"}`,children:" Oferta especial expira en:"}),o.jsx("p",{className:`text-3xl font-black tracking-wider ${k<=60?"text-red-600 dark:text-red-400":"text-amber-800 dark:text-amber-300"}`,children:El(k)})]})]}),k<=60&&o.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium animate-pulse",children:"ltimos segundos! El precio subir a $29.99"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-forest/90 to-forest rounded-2xl p-8 mb-8 shadow-2xl",children:[o.jsxs("div",{className:"w-48 h-48 mx-auto mb-6 rounded-2xl relative overflow-hidden shadow-2xl group",children:[Nl?o.jsx("img",{src:Nl,alt:"Album Art",className:"w-full h-full object-cover"}):o.jsx("div",{className:`w-full h-full bg-gradient-to-br ${Fe.color} flex items-center justify-center`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-6xl block mb-2 drop-shadow-lg",children:Fe.emoji}),o.jsx("span",{className:"text-white/80 text-xs font-bold uppercase tracking-wider",children:Fe.name})]})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),o.jsxs("div",{className:"absolute -right-6 top-1/2 -translate-y-1/2 w-24 h-24 rounded-full bg-black/80 border-4 border-gray-700 opacity-70 group-hover:rotate-45 transition-transform duration-500",children:[o.jsx("div",{className:"absolute inset-4 rounded-full bg-gradient-to-br from-gray-600 to-gray-800"}),o.jsx("div",{className:"absolute inset-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-gold"})]})]}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["Cancin para ",e.recipientName]}),o.jsxs("p",{className:"text-white/60",children:[Fe.name,"  ",xr]}),e.voiceType&&o.jsx("p",{className:"text-white/40 text-sm mt-1",children:e.voiceType==="female"?" Voz femenina":e.voiceType==="duet"?" Dueto":" Voz masculina"})]}),o.jsxs("div",{className:"bg-white/10 border-2 border-gold/40 rounded-xl p-6 mb-6",children:[un&&o.jsx("audio",{ref:L,src:un,preload:"metadata",crossOrigin:"anonymous"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:Wh,disabled:!un,className:"w-16 h-16 rounded-full bg-gradient-to-br from-gold to-gold/80 flex items-center justify-center text-forest shadow-lg shadow-gold/30 hover:scale-105 transition-transform disabled:opacity-50",children:o.jsx("span",{className:"material-symbols-outlined text-3xl",style:{fontVariationSettings:"'FILL' 1"},children:a?"pause":"play_arrow"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-gold to-gold/80 rounded-full transition-all",style:{width:`${u}%`}})}),o.jsxs("div",{className:"flex justify-between text-xs text-white/50 mt-2",children:[o.jsx("span",{children:Tl(d)}),o.jsx("span",{children:Tl(Hs)})]})]})]}),h&&o.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:h}),o.jsx("div",{className:"text-center mt-4",children:x?o.jsx("span",{className:"bg-bougainvillea/20 text-bougainvillea text-xs px-4 py-2 rounded-full font-semibold",children:" Preview terminado - Compra para escuchar completa!"}):o.jsx("span",{className:"bg-gold/20 text-gold text-xs px-4 py-2 rounded-full font-semibold",children:" Preview de 20 segundos"})})]}),o.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[o.jsxs("p",{className:"text-white/40 text-xs mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"lyrics"}),"Vista previa de la letra:"]}),o.jsxs("p",{className:"text-white/80 text-sm italic leading-relaxed whitespace-pre-line",children:['"',(n==null?void 0:n.lyrics)||`${e.recipientName}, esta cancin es para ti,
con todo el amor que ${e.senderName} siente aqu,
en cada nota va mi corazn...`,'"']})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("button",{onClick:Hh,disabled:_e<=0||Gt,className:`w-full py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${_e>0&&!Gt?"bg-white/10 hover:bg-white/20 text-white border border-white/20":"bg-white/5 text-white/30 border border-white/10 cursor-not-allowed"}`,children:Gt?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generando nueva versin..."]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"material-symbols-outlined text-xl",children:"refresh"}),_e>0?`Generar Nueva Versin (${_e} ${_e===1?"intento":"intentos"} restante${_e===1?"":"s"})`:"Sin intentos restantes"]})}),o.jsx("p",{className:"text-white/40 text-xs text-center mt-2",children:"Misma letra, nueva meloda e interpretacin"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-[#2c3136] rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-white/5",children:[o.jsx("div",{className:"text-center mb-6",children:N&&cn===0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[o.jsxs("span",{className:"text-gray-400 line-through text-2xl",children:["$",E?Re:jt]}),o.jsx("span",{className:"text-5xl font-black text-green-500",children:"GRATIS!"})]}),o.jsxs("p",{className:"text-green-500 font-semibold",children:[" Cdigo ",N.code," aplicado"]})]}):N?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[o.jsxs("span",{className:"text-gray-400 line-through text-2xl",children:["$",E?Re:jt]}),o.jsxs("span",{className:"text-5xl font-black text-green-500",children:["$",cn.toFixed(2)]}),o.jsx("span",{className:"bg-green-500 text-white text-sm px-3 py-1 rounded-full font-bold",children:N.type==="percentage"?`${N.discount}% OFF`:`-$${N.discount}`})]}),o.jsxs("p",{className:"text-green-500 font-semibold",children:[" Cdigo ",N.code," aplicado"]})]}):E?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:o.jsxs("span",{className:"text-5xl font-black text-[#171612] dark:text-white",children:["$",Re]})}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Precio regular"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[o.jsxs("span",{className:"text-gray-400 line-through text-2xl",children:["$",Re]}),o.jsxs("span",{className:"text-5xl font-black text-[#171612] dark:text-white",children:["$",jt]}),o.jsx("span",{className:"bg-bougainvillea text-white text-sm px-3 py-1 rounded-full font-bold animate-pulse",children:"33% OFF"})]}),o.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[" Precio especial por ",o.jsx("span",{className:"text-bougainvillea font-bold",children:El(k)})]})]})}),o.jsxs("div",{className:"mb-6",children:[N?o.jsxs("div",{className:"flex items-center justify-between bg-green-100 dark:bg-green-900/30 px-4 py-3 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-green-600",children:"discount"}),o.jsx("span",{className:"text-green-700 dark:text-green-400 font-semibold",children:N.code}),o.jsx("span",{className:"text-green-600 dark:text-green-500 text-sm",children:N.type==="free"?"(Gratis)":N.type==="percentage"?`(${N.discount}% desc.)`:`(-$${N.discount})`})]}),o.jsx("button",{onClick:Gh,className:"text-red-500 hover:text-red-600 text-sm font-medium",children:"Quitar"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:kt,onChange:C=>vr(C.target.value.toUpperCase()),placeholder:"Cdigo de descuento",className:"flex-1 px-4 py-3 rounded-xl bg-gray-100 dark:bg-white/10 border border-gray-200 dark:border-white/20 text-[#171612] dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"}),o.jsx("button",{onClick:Kh,disabled:ee||!kt.trim(),className:"px-6 py-3 rounded-xl bg-primary text-white font-semibold hover:bg-primary-dark transition-colors disabled:opacity-50",children:ee?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Aplicar"})]}),U&&o.jsxs("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"error"}),U]})]}),o.jsx("div",{className:"space-y-3 mb-8",children:[{icon:"music_note",text:"Cancin completa (2-3 minutos)"},{icon:"download",text:"Descarga en MP3 alta calidad"},{icon:"verified",text:"Sin marca de agua"},{icon:"all_inclusive",text:"Uso personal ilimitado"},{icon:"bolt",text:"Entrega instantnea por email"}].map(C=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-green-500",style:{fontVariationSettings:"'FILL' 1"},children:"check_circle"}),o.jsx("span",{className:"material-symbols-outlined text-primary/60 text-xl",children:C.icon}),o.jsx("span",{className:"text-[#171612] dark:text-white",children:C.text})]},C.text))}),o.jsx("button",{onClick:qh,disabled:f,className:`w-full py-5 rounded-xl font-bold text-white text-xl transition-all flex items-center justify-center gap-3 hover:brightness-110 hover:scale-[1.02] active:scale-[0.98] shadow-xl disabled:opacity-70 disabled:cursor-not-allowed ${cn===0||N?"bg-gradient-to-r from-green-500 to-green-600 shadow-green-500/30":E?"bg-gradient-to-r from-gray-600 to-gray-700 shadow-gray-500/30":"bg-gradient-to-r from-bougainvillea to-bougainvillea/80 shadow-bougainvillea/30"}`,children:f?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):cn===0?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"material-symbols-outlined",children:"download"}),"Obtener Gratis!"]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"material-symbols-outlined",children:"credit_card"}),!E&&!N?"Comprar Ahora!":"Comprar Cancin",o.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-lg text-sm",children:["$",cn.toFixed(2)]})]})}),o.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6 text-gray-400 text-sm",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"lock"}),"Pago seguro"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"credit_card"}),"Stripe"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"verified_user"}),"Garanta"]})]})]}),o.jsx("div",{className:"mt-10 bg-primary/5 border border-primary/20 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary/30 to-primary/10 flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[#171612] dark:text-white italic mb-2",children:'"Mi esposo llor cuando escuch la cancin. Nunca haba visto algo tan especial. Vale cada centavo!"'}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:" Mara G., Guadalajara"})]})]})}),o.jsx("div",{className:"text-center mt-8",children:o.jsx("button",{onClick:()=>t("email"),className:"text-gray-400 hover:text-primary transition-colors text-sm",children:" Volver a editar detalles"})})]})]})]})}const C0={corrido:{name:"Corrido",emoji:""},norteno:{name:"Norteo",emoji:""},banda:{name:"Banda",emoji:""},cumbia:{name:"Cumbia",emoji:""},ranchera:{name:"Ranchera",emoji:""},balada:{name:"Balada",emoji:""},reggaeton:{name:"Reggaetn",emoji:""},salsa:{name:"Salsa",emoji:""}};function O0(){var k;const{navigateTo:t,formData:e,songData:r,clearSession:n}=T.useContext(Ce),[s,i]=T.useState(!1),[a,l]=T.useState(0),[u,c]=T.useState(0),[d,m]=T.useState(0),[f,y]=T.useState(!0),v=T.useRef(null),w=C0[e.genre]||{name:"Msica",emoji:""},b=(r==null?void 0:r.previewUrl)||(r==null?void 0:r.audioUrl)||(r==null?void 0:r.audio_url);T.useEffect(()=>{const _=setTimeout(()=>y(!1),5e3);return()=>clearTimeout(_)},[]),T.useEffect(()=>{const _=v.current;if(!_)return;const E=()=>{c(_.currentTime),_.duration&&l(_.currentTime/_.duration*100)},$=()=>{m(_.duration)},L=()=>{i(!1),l(0),c(0)};return _.addEventListener("timeupdate",E),_.addEventListener("loadedmetadata",$),_.addEventListener("ended",L),()=>{_.removeEventListener("timeupdate",E),_.removeEventListener("loadedmetadata",$),_.removeEventListener("ended",L)}},[]);const p=()=>{const _=v.current;_&&(s?_.pause():_.play(),i(!s))},h=_=>{if(!_||isNaN(_))return"0:00";const E=Math.floor(_/60),$=Math.floor(_%60);return`${E}:${$.toString().padStart(2,"0")}`},g=()=>{n()},x=encodeURIComponent("Escucha la cancin personalizada que me crearon en RegalosQueCantan! "),j=encodeURIComponent("https://regalosquecantan.com");return o.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors relative overflow-hidden",children:[f&&o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(50)].map((_,E)=>o.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-20px",animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},children:o.jsx("div",{className:"w-3 h-3 rotate-45",style:{backgroundColor:["#d4af35","#E11D74","#1A4338","#ff6b6b","#4ecdc4"][Math.floor(Math.random()*5)]}})},E))}),o.jsx(ut,{}),o.jsxs("main",{className:"max-w-2xl mx-auto px-6 py-12",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"text-7xl mb-4",children:""}),o.jsx("h1",{className:"text-4xl md:text-5xl font-black text-[#171612] dark:text-white mb-4 tracking-tight",children:"Gracias por tu compra!"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:["Tu cancin completa est en camino a"," ",o.jsx("span",{className:"text-primary font-semibold",children:e.email})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-forest to-forest/90 rounded-2xl p-8 mb-8 shadow-2xl",children:[o.jsxs("div",{className:"w-40 h-40 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-gold/30 to-bougainvillea/20 flex items-center justify-center relative overflow-hidden shadow-xl",children:[o.jsx("span",{className:"text-6xl",children:w.emoji}),s&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:o.jsx("div",{className:"flex gap-1",children:[...Array(4)].map((_,E)=>o.jsx("div",{className:"w-1 bg-gold rounded-full animate-equalizer",style:{animationDelay:`${E*.1}s`,height:"30px"}},E))})})]}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-1",children:["Cancin para ",e.recipientName]}),o.jsxs("p",{className:"text-white/60 text-sm",children:[w.name,"  Cancin Completa"]})]}),o.jsxs("div",{className:"bg-white/10 rounded-xl p-6",children:[b&&o.jsx("audio",{ref:v,src:b,preload:"metadata"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:p,disabled:!b,className:"w-14 h-14 rounded-full bg-gradient-to-br from-gold to-gold/80 flex items-center justify-center text-forest shadow-lg shadow-gold/30 hover:scale-105 transition-transform disabled:opacity-50",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",style:{fontVariationSettings:"'FILL' 1"},children:s?"pause":"play_arrow"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-gold to-gold/80 rounded-full transition-all",style:{width:`${a}%`}})}),o.jsxs("div",{className:"flex justify-between text-xs text-white/50 mt-2",children:[o.jsx("span",{children:h(u)}),o.jsx("span",{children:h(d)})]})]})]})]})]}),b?o.jsxs("a",{href:b,download:`cancion-para-${e.recipientName}.mp3`,className:"w-full py-5 rounded-xl font-bold text-forest text-xl transition-all flex items-center justify-center gap-3 bg-gradient-to-r from-gold to-gold/90 hover:brightness-110 hover:scale-[1.02] active:scale-[0.98] shadow-xl shadow-gold/30 mb-8",children:[o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"download"}),"Descargar MP3"]}):o.jsxs("button",{disabled:!0,className:"w-full py-5 rounded-xl font-bold text-forest text-xl bg-gray-300 mb-8 cursor-not-allowed",children:[o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"download"}),"Descarga no disponible"]}),o.jsxs("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-6 border border-gray-100 dark:border-white/5 mb-8",children:[o.jsx("h3",{className:"font-bold text-[#171612] dark:text-white mb-4 text-center",children:"Comparte tu cancin "}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("a",{href:`https://wa.me/?text=${x}%20${j}`,target:"_blank",rel:"noopener noreferrer",className:"w-14 h-14 rounded-full bg-[#25D366] flex items-center justify-center text-white hover:scale-110 transition-transform shadow-lg",children:o.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),o.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${j}`,target:"_blank",rel:"noopener noreferrer",className:"w-14 h-14 rounded-full bg-[#1877F2] flex items-center justify-center text-white hover:scale-110 transition-transform shadow-lg",children:o.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),o.jsx("a",{href:`https://twitter.com/intent/tweet?text=${x}&url=${j}`,target:"_blank",rel:"noopener noreferrer",className:"w-14 h-14 rounded-full bg-black flex items-center justify-center text-white hover:scale-110 transition-transform shadow-lg",children:o.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-[#2c3136] rounded-xl p-6 border border-gray-100 dark:border-white/5 mb-8",children:[o.jsxs("h3",{className:"font-bold text-[#171612] dark:text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-primary",children:"receipt_long"}),"Detalles de tu pedido"]}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Nmero de orden"}),o.jsxs("span",{className:"font-mono text-[#171612] dark:text-white",children:["#",((k=r==null?void 0:r.id)==null?void 0:k.slice(-8))||"RQC-2024-001"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Cancin para"}),o.jsx("span",{className:"text-[#171612] dark:text-white",children:e.recipientName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Gnero"}),o.jsxs("span",{className:"text-[#171612] dark:text-white",children:[w.emoji," ",w.name]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total pagado"}),o.jsx("span",{className:"font-bold text-primary",children:"$19.99 USD"})]})]})]}),o.jsx("div",{className:"text-center",children:o.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 font-semibold transition-colors",children:[o.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"Crear otra cancin"]})})]}),o.jsx("style",{children:`
        @keyframes confetti {
          0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
          }
        }
        .animate-confetti {
          animation: confetti linear forwards;
        }
        @keyframes equalizer {
          0%, 100% { transform: scaleY(0.3); }
          50% { transform: scaleY(1); }
        }
        .animate-equalizer {
          animation: equalizer 0.5s ease-in-out infinite;
          transform-origin: bottom;
        }
      `})]})}const dc={username:"admin",password:"RQC2024!"};function R0(){const{navigateTo:t}=T.useContext(Ce),[e,r]=T.useState(""),[n,s]=T.useState(""),[i,a]=T.useState(""),[l,u]=T.useState(!1),c=d=>{d.preventDefault(),u(!0),a(""),setTimeout(()=>{e===dc.username&&n===dc.password?(localStorage.setItem("rqc_admin_auth",JSON.stringify({authenticated:!0,timestamp:Date.now()})),t("adminDashboard")):a("Usuario o contrasea incorrectos"),u(!1)},500)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-forest to-forest/90 flex items-center justify-center p-6",children:o.jsxs("div",{className:"bg-white dark:bg-[#2c3136] rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gold/20 to-gold/10 rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"material-symbols-outlined text-gold text-3xl",children:"admin_panel_settings"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#171612] dark:text-white",children:"Admin Dashboard"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"RegalosQueCantan"})]}),o.jsxs("form",{onSubmit:c,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario"}),o.jsx("input",{type:"text",value:e,onChange:d=>r(d.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-white/5 text-[#171612] dark:text-white focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"admin",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contrasea"}),o.jsx("input",{type:"password",value:n,onChange:d=>s(d.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-white/5 text-[#171612] dark:text-white focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"",required:!0})]}),i&&o.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 px-4 py-3 rounded-xl text-sm",children:i}),o.jsx("button",{type:"submit",disabled:l,className:"w-full py-4 rounded-xl font-bold text-white bg-gradient-to-r from-gold to-gold/80 hover:brightness-110 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"material-symbols-outlined",children:"login"}),"Iniciar Sesin"]})})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsx("a",{href:"/",className:"text-gray-400 hover:text-gold transition-colors text-sm",children:" Volver al sitio"})})]})})}function P0(){const{navigateTo:t}=T.useContext(Ce),[e,r]=T.useState([]),[n,s]=T.useState(!0),[i,a]=T.useState(null),[l,u]=T.useState(""),[c,d]=T.useState("all"),[m,f]=T.useState(null),[y,v]=T.useState({totalSongs:0,totalRevenue:0,paidOrders:0,pendingOrders:0});T.useEffect(()=>{const x=localStorage.getItem("rqc_admin_auth");if(!x){t("adminLogin");return}try{const j=JSON.parse(x);if(Date.now()-j.timestamp>24*60*60*1e3){localStorage.removeItem("rqc_admin_auth"),t("adminLogin");return}}catch{t("adminLogin");return}w()},[]);const w=async()=>{s(!0);try{const{data:x,error:j}=await Bh.from("songs").select("*").order("created_at",{ascending:!1});if(j)throw j;r(x||[]);const k=(x==null?void 0:x.length)||0,_=(x==null?void 0:x.filter(L=>L.paid).length)||0,E=k-_,$=_*19.99;v({totalSongs:k,totalRevenue:$,paidOrders:_,pendingOrders:E})}catch(x){console.error("Error fetching songs:",x),a(x.message)}finally{s(!1)}},b=()=>{localStorage.removeItem("rqc_admin_auth"),window.location.href="/"},p=e.filter(x=>{var _,E,$;const j=((_=x.recipient_name)==null?void 0:_.toLowerCase().includes(l.toLowerCase()))||((E=x.sender_name)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))||(($=x.email)==null?void 0:$.toLowerCase().includes(l.toLowerCase())),k=c==="all"||c==="paid"&&x.paid||c==="pending"&&!x.paid;return j&&k}),h=x=>x?new Date(x).toLocaleString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",g=x=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"USD"}).format(x);return n?o.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-[#1a1d21] flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Cargando datos..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-[#1a1d21]",children:[o.jsx("header",{className:"bg-white dark:bg-[#2c3136] shadow-sm sticky top-0 z-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gold/20 to-gold/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-gold",children:"admin_panel_settings"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-[#171612] dark:text-white",children:"Admin Dashboard"}),o.jsx("p",{className:"text-xs text-gray-500",children:"RegalosQueCantan"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",title:"Refrescar",children:o.jsx("span",{className:"material-symbols-outlined text-gray-500",children:"refresh"})}),o.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-sm font-medium",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"}),"Salir"]})]})]})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-6 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Canciones"}),o.jsx("p",{className:"text-3xl font-bold text-[#171612] dark:text-white mt-1",children:y.totalSongs})]}),o.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400",children:"music_note"})})]})}),o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-6 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Ingresos Totales"}),o.jsx("p",{className:"text-3xl font-bold text-[#171612] dark:text-white mt-1",children:g(y.totalRevenue)})]}),o.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"payments"})})]})}),o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-6 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Pagados"}),o.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:y.paidOrders})]}),o.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"check_circle"})})]})}),o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-6 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Pendientes"}),o.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400 mt-1",children:y.pendingOrders})]}),o.jsx("div",{className:"w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-amber-600 dark:text-amber-400",children:"pending"})})]})})]}),o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl p-4 mb-6 shadow-sm",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"search"}),o.jsx("input",{type:"text",placeholder:"Buscar por nombre, email...",value:l,onChange:x=>u(x.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-white/5 text-[#171612] dark:text-white focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),o.jsx("div",{className:"flex gap-2",children:["all","paid","pending"].map(x=>o.jsx("button",{onClick:()=>d(x),className:`px-4 py-3 rounded-lg font-medium transition-colors ${c===x?"bg-gold text-forest":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:x==="all"?"Todos":x==="paid"?"Pagados":"Pendientes"},x))})]})}),i&&o.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 px-6 py-4 rounded-xl mb-6",children:["Error: ",i]}),o.jsx("div",{className:"bg-white dark:bg-[#2c3136] rounded-xl shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-white/5",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Para / De"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Gnero"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:p.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No se encontraron canciones"})}):p.map(x=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:h(x.created_at)}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"text-sm font-medium text-[#171612] dark:text-white",children:x.recipient_name}),o.jsxs("div",{className:"text-xs text-gray-500",children:["de ",x.sender_name]})]}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:x.email}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300 capitalize",children:x.genre}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${x.paid?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:[o.jsx("span",{className:"material-symbols-outlined text-sm",style:{fontVariationSettings:"'FILL' 1"},children:x.paid?"check_circle":"pending"}),x.paid?"Pagado":"Pendiente"]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>f(x),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",title:"Ver detalles",children:o.jsx("span",{className:"material-symbols-outlined text-gray-500",children:"visibility"})}),x.audio_url&&o.jsx("a",{href:x.audio_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",title:"Escuchar cancin",children:o.jsx("span",{className:"material-symbols-outlined text-gold",children:"play_circle"})})]})})]},x.id))})]})})}),o.jsxs("div",{className:"mt-4 text-sm text-gray-500 text-center",children:["Mostrando ",p.length," de ",e.length," canciones"]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>f(null),children:o.jsxs("div",{className:"bg-white dark:bg-[#2c3136] rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-white dark:bg-[#2c3136] border-b border-gray-100 dark:border-white/5 px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-[#171612] dark:text-white",children:"Detalles de la Cancin"}),o.jsx("button",{onClick:()=>f(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-gray-500",children:"close"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full font-medium ${m.paid?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:[o.jsx("span",{className:"material-symbols-outlined text-lg",style:{fontVariationSettings:"'FILL' 1"},children:m.paid?"check_circle":"pending"}),m.paid?"Pagado - $19.99":"Pendiente de pago"]}),o.jsx("span",{className:"text-sm text-gray-500",children:h(m.created_at)})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Para"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white",children:m.recipient_name})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"De"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white",children:m.sender_name})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gnero"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white capitalize",children:m.genre})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Ocasin"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white capitalize",children:m.occasion})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white",children:m.email}),m.relationship&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1 mt-3",children:"Relacin"}),o.jsx("p",{className:"font-semibold text-[#171612] dark:text-white",children:m.relationship})]})]}),m.details&&o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Detalles proporcionados"}),o.jsx("p",{className:"text-[#171612] dark:text-white text-sm whitespace-pre-wrap",children:m.details})]}),m.lyrics&&o.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Letra generada"}),o.jsx("p",{className:"text-[#171612] dark:text-white text-sm whitespace-pre-wrap font-mono leading-relaxed max-h-60 overflow-y-auto",children:m.lyrics})]}),m.audio_url&&o.jsxs("div",{className:"bg-gradient-to-br from-forest/10 to-forest/5 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Cancin generada"}),o.jsx("audio",{controls:!0,className:"w-full",src:m.audio_url,children:"Tu navegador no soporta audio HTML5."}),o.jsx("div",{className:"flex gap-2 mt-3",children:o.jsxs("a",{href:m.audio_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 px-4 bg-gold text-forest rounded-lg font-medium text-center text-sm hover:brightness-110 transition-all flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Descargar MP3"]})})]}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",m.id]})})]})]})})]})}const Ce=bi.createContext(),hc="1.0.9",ke={VERSION:"rqc_version",PAGE:"rqc_currentPage",FORM_DATA:"rqc_formData",SONG_DATA:"rqc_songData"},A0=()=>localStorage.getItem(ke.VERSION)!==hc?(localStorage.removeItem(ke.PAGE),localStorage.removeItem(ke.FORM_DATA),localStorage.removeItem(ke.SONG_DATA),localStorage.setItem(ke.VERSION,hc),!0):!1,I0=A0(),No=(t,e)=>{try{const r=localStorage.getItem(t);if(r)return JSON.parse(r)}catch(r){console.error("Error loading from storage:",r)}return e},$0=()=>{const e=window.location.pathname.match(/^\/preview\/([a-zA-Z0-9-]+)/);return e?e[1]:null},L0=()=>{const t=window.location.pathname;return t==="/admin"?"adminLogin":t==="/admin/dashboard"?"adminDashboard":t.startsWith("/preview/")?"preview":I0?"landing":No(ke.PAGE,"landing")},U0=$0();function D0(){const[t,e]=T.useState(L0),[r,n]=T.useState(U0),[s,i]=T.useState(()=>No(ke.FORM_DATA,{genre:"",genreStyle:"",occasion:"",occasionPrompt:"",recipientName:"",senderName:"",relationship:"",details:"",email:"",voiceType:""})),[a,l]=T.useState(()=>No(ke.SONG_DATA,null));T.useEffect(()=>{t.startsWith("admin")||localStorage.setItem(ke.PAGE,JSON.stringify(t))},[t]),T.useEffect(()=>{localStorage.setItem(ke.FORM_DATA,JSON.stringify(s))},[s]),T.useEffect(()=>{a&&localStorage.setItem(ke.SONG_DATA,JSON.stringify(a))},[a]),T.useEffect(()=>{const f=y=>{var v;(v=y.state)!=null&&v.page&&e(y.state.page)};return window.addEventListener("popstate",f),()=>window.removeEventListener("popstate",f)},[]),T.useEffect(()=>{const f=window.location.pathname;f==="/admin"&&t!=="adminLogin"?e("adminLogin"):f==="/admin/dashboard"&&t!=="adminDashboard"&&e("adminDashboard")},[]);const m={currentPage:t,navigateTo:f=>{e(f);const y=f.startsWith("admin")?`/${f.replace("admin","admin/").toLowerCase()}`:"/";window.history.pushState({page:f},"",y),window.scrollTo(0,0)},formData:s,setFormData:i,updateFormData:(f,y)=>{i(v=>({...v,[f]:y}))},songData:a,setSongData:l,clearSession:()=>{localStorage.removeItem(ke.PAGE),localStorage.removeItem(ke.FORM_DATA),localStorage.removeItem(ke.SONG_DATA),i({genre:"",genreStyle:"",occasion:"",occasionPrompt:"",recipientName:"",senderName:"",relationship:"",details:"",email:"",voiceType:""}),l(null),e("landing")},directSongId:r,setDirectSongId:n};return o.jsx(Ce.Provider,{value:m,children:o.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors duration-300",children:[t==="landing"&&o.jsx(Sp,{}),t==="genre"&&o.jsx(d0,{}),t==="occasion"&&o.jsx(f0,{}),t==="names"&&o.jsx(p0,{}),t==="voice"&&o.jsx(y0,{}),t==="details"&&o.jsx(x0,{}),t==="email"&&o.jsx(_0,{}),t==="generating"&&o.jsx(k0,{}),t==="preview"&&o.jsx(T0,{}),t==="success"&&o.jsx(O0,{}),t==="adminLogin"&&o.jsx(R0,{}),t==="adminDashboard"&&o.jsx(P0,{})]})})}ba.createRoot(document.getElementById("root")).render(o.jsx(bi.StrictMode,{children:o.jsx(D0,{})}));
